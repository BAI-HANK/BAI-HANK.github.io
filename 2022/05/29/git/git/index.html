<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/blog.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/blog.svg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/blog.svg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-big-counter.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"bh.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","width":300,"display":"post","padding":8,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="git 常用命令一些认知  git 是一个复杂的软件,命令参数组合起来有上百种,掌握常用的就好了">
<meta property="og:type" content="blog">
<meta property="og:title" content="git 常用命令">
<meta property="og:url" content="http://bh.com/2022/05/29/git/git/index.html">
<meta property="og:site_name" content="Hank Blog">
<meta property="og:description" content="git 常用命令一些认知  git 是一个复杂的软件,命令参数组合起来有上百种,掌握常用的就好了">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://bh.com/2022/05/29/git/git/git-flow.jpg">
<meta property="og:image" content="http://bh.com/2022/05/29/git/git/merge_request.png">
<meta property="og:image" content="http://bh.com/2022/05/29/git/git/merge_request_flow.png">
<meta property="article:published_time" content="2022-05-29T12:21:11.000Z">
<meta property="article:modified_time" content="2022-12-16T03:55:43.078Z">
<meta property="article:author" content="Hank Bai">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://bh.com/2022/05/29/git/git/git-flow.jpg">


<link rel="canonical" href="http://bh.com/2022/05/29/git/git/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://bh.com/2022/05/29/git/git/","path":"2022/05/29/git/git/","title":"git 常用命令"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>git 常用命令 | Hank Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hank Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">热爱生活,拥抱开源,乐于分享</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">8</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">20</span></a></li><li class="menu-item menu-item-others"><a href="/others/" rel="section"><i class="fa fa-users fa-fw"></i>推荐</a></li><li class="menu-item menu-item-read"><a href="/read/" rel="section"><i class="fa fa-book fa-fw"></i>阅读</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">1.</span> <span class="nav-text">git 常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E8%AE%A4%E7%9F%A5"><span class="nav-number">1.1.</span> <span class="nav-text">一些认知</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B8%AE%E5%8A%A9"><span class="nav-number">1.2.</span> <span class="nav-text">查看帮助</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC"><span class="nav-number">1.3.</span> <span class="nav-text">查看版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="nav-number">1.4.</span> <span class="nav-text">配置用户信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E6%97%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA-unix-LF-%E6%A3%80%E5%87%BA%E6%97%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA-windows-CR-LF"><span class="nav-number">1.5.</span> <span class="nav-text">提交时转换为 unix LF,检出时转换为 windows CR LF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E5%8C%85%E5%90%AB%E6%B7%B7%E5%90%88%E6%8D%A2%E8%A1%8C%E7%AC%A6%E7%9A%84%E6%96%87%E4%BB%B6%E6%97%B6%E7%BB%99%E5%87%BA%E8%AD%A6%E5%91%8A"><span class="nav-number">1.6.</span> <span class="nav-text">提交包含混合换行符的文件时给出警告</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-init-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%93%E5%BA%93"><span class="nav-number">1.7.</span> <span class="nav-text">git init 初始化仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-config-%E9%85%8D%E7%BD%AE"><span class="nav-number">1.8.</span> <span class="nav-text">git config 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-mv-%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6-%E7%9B%AE%E5%BD%95%E6%88%96%E7%A7%BB%E5%8A%A8%E6%96%87%E4%BB%B6-%E7%9B%AE%E5%BD%95%E4%BD%8D%E7%BD%AE"><span class="nav-number">1.9.</span> <span class="nav-text">git mv 重命名文件,目录或移动文件,目录位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-add-%E6%8A%8A%E4%BB%A3%E7%A0%81%E5%8A%A0%E5%85%A5%E6%9A%82%E5%AD%98%E5%8C%BA"><span class="nav-number">1.10.</span> <span class="nav-text">git add 把代码加入暂存区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-commit-%E6%8F%90%E4%BA%A4-commit-%E6%98%AF-%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C"><span class="nav-number">1.11.</span> <span class="nav-text">git commit 提交 commit 是 原子操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-rm-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6-%E5%88%A0%E9%99%A4%E5%90%8E%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4%E6%89%8D%E8%83%BD%E5%90%8C%E6%AD%A5"><span class="nav-number">1.12.</span> <span class="nav-text">git rm  删除文件,删除后要进行一次提交才能同步</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-ls-files-%E6%9F%A5%E7%9C%8B%E6%9A%82%E5%AD%98%E5%8C%BA%E7%9A%84%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="nav-number">1.13.</span> <span class="nav-text">git ls-files 查看暂存区的文件信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-status-%E6%9F%A5%E7%9C%8B%E5%B7%A5%E4%BD%9C%E5%8C%BA%E6%96%87%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81"><span class="nav-number">1.14.</span> <span class="nav-text">git status  查看工作区文件的状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-diff-%E6%9F%A5%E7%9C%8B%E4%BB%A3%E7%A0%81%E5%BA%93%E5%B7%AE%E5%BC%82"><span class="nav-number">1.15.</span> <span class="nav-text">git diff 查看代码库差异</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%92%8C%E6%9A%82%E5%AD%98%E5%8C%BA%E6%96%87%E4%BB%B6%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="nav-number">1.15.1.</span> <span class="nav-text">查看工作区和暂存区文件的差异</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%BA%93%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="nav-number">1.15.2.</span> <span class="nav-text">查看工作区和本地库的差异</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9A%82%E5%AD%98%E5%8C%BA%E5%92%8C%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="nav-number">1.15.3.</span> <span class="nav-text">查看暂存区和本地仓库的差异</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E4%BF%A9%E4%B8%AA-commit-%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="nav-number">1.15.4.</span> <span class="nav-text">查看俩个 commit 的差异</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-log-%E6%9F%A5%E7%9C%8B-commit-%E5%8E%86%E5%8F%B2"><span class="nav-number">1.16.</span> <span class="nav-text">git log 查看 commit 历史</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#git-blame-%E6%8C%87%E5%AE%9A%E5%85%B7%E4%BD%93%E7%9A%84%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B"><span class="nav-number">1.16.1.</span> <span class="nav-text">git blame 指定具体的文件查看</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shortlog-%E6%8C%89%E6%8F%90%E4%BA%A4%E8%80%85%E8%BF%9B%E8%A1%8C%E5%88%86%E7%BB%84"><span class="nav-number">1.16.2.</span> <span class="nav-text">shortlog 按提交者进行分组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.16.3.</span> <span class="nav-text">限制时间范围查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4-merges-%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.16.4.</span> <span class="nav-text">过滤 merges 查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E7%8B%AC%E6%9F%A5%E8%AF%A2%E6%9F%90%E4%B8%AA%E5%88%86%E6%94%AF%E7%9A%84%E6%8F%90%E4%BA%A4"><span class="nav-number">1.16.5.</span> <span class="nav-text">单独查询某个分支的提交</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%9C%A8%E6%9F%90%E6%AC%A1%E6%8F%90%E4%BA%A4%E5%90%8E%E7%9A%84%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4"><span class="nav-number">1.16.6.</span> <span class="nav-text">查询在某次提交后的所有提交</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2-%E6%A0%B9%E6%8D%AE%E5%85%B3%E9%94%AE%E8%AF%8D"><span class="nav-number">1.16.7.</span> <span class="nav-text">搜索提交历史,根据关键词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="nav-number">1.16.8.</span> <span class="nav-text">查看所有的历史记录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF%E7%9A%84%E8%B5%B7%E7%82%B9"><span class="nav-number">1.16.8.1.</span> <span class="nav-text">查看分支的起点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-checkout-%E9%87%8D%E7%BD%AE%E5%BD%93%E5%89%8D%E5%B7%A5%E4%BD%9C%E5%8C%BA%E6%96%87%E4%BB%B6%E4%B8%8E%E6%9A%82%E5%AD%98%E5%8C%BA%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4"><span class="nav-number">1.17.</span> <span class="nav-text">git checkout 重置当前工作区文件与暂存区保持一致</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-reset-%E9%87%8D%E7%BD%AE"><span class="nav-number">1.18.</span> <span class="nav-text">git reset 重置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hard-%E5%9B%9E%E9%80%80%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E8%A6%81%E8%B0%A8%E6%85%8E-%E5%9B%9E%E9%80%80%E4%BA%86%E4%BB%A3%E7%A0%81%E5%BE%88%E9%9A%BE%E6%89%BE%E5%9B%9E%E6%9D%A5"><span class="nav-number">1.18.1.</span> <span class="nav-text">hard 回退历史版本这个操作要谨慎,回退了代码很难找回来</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#soft-%E5%9B%9E%E9%80%80"><span class="nav-number">1.18.2.</span> <span class="nav-text">soft 回退</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mixed-%E5%9B%9E%E9%80%80-%E6%AD%A4%E5%8F%82%E6%95%B0%E4%B9%9F%E5%8F%AF%E4%B8%8D%E5%86%99"><span class="nav-number">1.18.3.</span> <span class="nav-text">mixed 回退,此参数也可不写</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-revert-%E6%92%A4%E9%94%80%E6%8F%90%E4%BA%A4%E7%9A%84-commit"><span class="nav-number">1.19.</span> <span class="nav-text">git revert 撤销提交的 commit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tag-%E7%AE%A1%E7%90%86"><span class="nav-number">1.20.</span> <span class="nav-text">tag 管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#tag-%E6%9C%89%E4%BF%A9%E7%A7%8D%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.20.1.</span> <span class="nav-text">tag 有俩种类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0-tag"><span class="nav-number">1.21.</span> <span class="nav-text">增加 tag</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2-tag"><span class="nav-number">1.21.1.</span> <span class="nav-text">查询 tag</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4-tag"><span class="nav-number">1.22.</span> <span class="nav-text">删除 tag</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%91%BD%E5%90%8D-tag"><span class="nav-number">1.23.</span> <span class="nav-text">重命名 tag</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A8%E9%80%81-tag-%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">1.24.</span> <span class="nav-text">推送 tag 到远程仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#head-detached-head-%E5%88%86%E7%A6%BB%E7%8A%B6%E6%80%81"><span class="nav-number">2.</span> <span class="nav-text">head detached head 分离状态</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#git-checkout-commitId-%E7%A7%BB%E5%8A%A8-head-%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9A%84-commitId-head-%E5%B0%B1%E4%BC%9A%E8%BF%9B%E5%85%A5%E5%88%86%E7%A6%BB%E7%8A%B6%E6%80%81"><span class="nav-number">2.1.</span> <span class="nav-text">git checkout commitId 移动 head 到指定的 commitId head 就会进入分离状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-checkout-origin-branchName-%E6%88%96-git-checkout-remoteCommitId"><span class="nav-number">2.2.</span> <span class="nav-text">git checkout  origin&#x2F;branchName 或 git checkout  remoteCommitId</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="nav-number">3.1.</span> <span class="nav-text">创建分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%97%A0%E7%88%B6%E5%88%86%E6%94%AF"><span class="nav-number">3.2.</span> <span class="nav-text">创建一个无父分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="nav-number">3.3.</span> <span class="nav-text">切换分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B9%B6%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF%E4%B8%80%E8%B5%B7%E6%89%A7%E8%A1%8C"><span class="nav-number">3.4.</span> <span class="nav-text">创建并切换分支一起执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF%E6%97%B6%E6%9C%89%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E5%86%85%E5%AE%B9"><span class="nav-number">3.5.</span> <span class="nav-text">切换分支时有未提交的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF"><span class="nav-number">3.6.</span> <span class="nav-text">查看分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF"><span class="nav-number">3.7.</span> <span class="nav-text">删除分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%91%BD%E5%90%8D%E5%88%86%E6%94%AF%E5%90%8D%E5%AD%97"><span class="nav-number">3.8.</span> <span class="nav-text">重命名分支名字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E5%88%86%E6%94%AF%E5%B7%AE%E5%BC%82"><span class="nav-number">3.9.</span> <span class="nav-text">比较分支差异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%90%84%E4%B8%AA%E5%88%86%E6%94%AF%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">3.10.</span> <span class="nav-text">查看各个分支最后一个提交对象的信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E7%BB%8F%E5%90%88%E5%B9%B6%E5%88%B0%E5%BD%93%E5%89%8D%E5%88%86%E6%94%AF%E7%9A%84%E5%88%86%E6%94%AF"><span class="nav-number">3.11.</span> <span class="nav-text">查看已经合并到当前分支的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%AA%E5%90%88%E5%B9%B6%E5%88%B0%E5%BD%93%E5%89%8D%E5%88%86%E6%94%AF%E7%9A%84%E5%88%86%E6%94%AF"><span class="nav-number">3.12.</span> <span class="nav-text">查看未合并到当前分支的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="nav-number">3.13.</span> <span class="nav-text">对远程分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"><span class="nav-number">3.13.1.</span> <span class="nav-text">新建远程分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"><span class="nav-number">3.13.2.</span> <span class="nav-text">查看远程分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"><span class="nav-number">3.13.3.</span> <span class="nav-text">删除远程分支</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E5%92%8C%E6%8C%87%E5%AE%9A%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%BB%BA%E7%AB%8B%E8%BF%BD%E8%B8%AA%E5%85%B3%E7%B3%BB"><span class="nav-number">3.14.</span> <span class="nav-text">本地分支和指定的远程分支建立追踪关系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E7%BB%91%E5%AE%9A%E5%85%B3%E7%B3%BB"><span class="nav-number">3.14.1.</span> <span class="nav-text">建立绑定关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0%E5%92%8C%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%9A%84%E5%85%B3%E8%81%94"><span class="nav-number">3.14.2.</span> <span class="nav-text">查看本地和远程分支的关联</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%9C%A8%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E4%B8%8D%E5%AD%98%E5%9C%A8-%E4%BD%86%E6%98%AF%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%9C%A8%E7%9A%84%E5%BC%95%E7%94%A8%E5%88%86%E6%94%AF"><span class="nav-number">3.15.</span> <span class="nav-text">删除在远程仓库不存在,但是本地存在的引用分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%9C%AC%E5%9C%B0%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%9A%84%E5%BC%95%E7%94%A8"><span class="nav-number">3.16.</span> <span class="nav-text">更新本地远程分支的引用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-merge-%E2%80%93ff-%E5%BF%AB%E8%BF%9B%E5%90%88%E5%B9%B6-%E6%88%96-%E2%80%93no-ff-%E4%B8%8D%E5%BF%AB%E8%BF%9B%E5%90%88%E5%B9%B6-%E6%97%A0%E5%86%B2%E7%AA%81%E5%90%88%E5%B9%B6"><span class="nav-number">3.17.</span> <span class="nav-text">git merge  –ff(快进合并)  或 –no-ff(不快进合并). 无冲突合并</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-merge-%E2%80%93squash-%E5%90%88%E5%B9%B6%E6%97%B6%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF%E7%9A%84%E5%A4%9A%E4%B8%AAcommit-%E4%B8%BA%E4%B8%80%E4%B8%AA-%E6%96%B0%E7%94%9F%E6%88%90%E7%9A%84-commit"><span class="nav-number">3.18.</span> <span class="nav-text">git merge –squash 合并时合并分支的多个commit 为一个 新生成的 commit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-merge-%E6%9C%89%E5%86%B2%E7%AA%81-%E4%B8%8D%E7%AC%A6%E5%90%88%E5%BF%AB%E9%80%9F%E5%90%88%E5%B9%B6"><span class="nav-number">3.19.</span> <span class="nav-text">git merge 有冲突,不符合快速合并</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rebase-%E5%90%88%E5%B9%B6%E5%8F%98%E5%9F%BA"><span class="nav-number">3.20.</span> <span class="nav-text">rebase 合并变基</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E5%90%8C%E4%B8%80%E5%88%86%E6%94%AF%E7%9A%84%E5%A4%9A%E4%B8%AAcommit-%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="nav-number">3.20.1.</span> <span class="nav-text">对同一分支的多个commit 进行增删改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E5%88%86%E6%94%AF%E7%9A%84%E5%8F%98%E5%9F%BA"><span class="nav-number">3.20.2.</span> <span class="nav-text">不同分支的变基</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E5%8F%96%E5%88%86%E6%94%AF%E6%8C%87%E5%AE%9A%E7%9A%84%E5%87%A0%E4%B8%AA-commit-%E5%88%B0%E5%85%B6%E4%BB%96%E5%88%86%E6%94%AF"><span class="nav-number">3.21.</span> <span class="nav-text">提取分支指定的几个 commit 到其他分支</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#git-rebase-startpoint-endpoint-%E2%80%93onto-branchName"><span class="nav-number">3.21.1.</span> <span class="nav-text">git rebase   [startpoint]   [endpoint]  –onto  [branchName]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-git-cherry-pick"><span class="nav-number">3.21.2.</span> <span class="nav-text">通过 git cherry-pick</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E5%88%87%E5%89%B2%E6%9C%BA-git-rebase-%E2%80%93onto-master-next-topic"><span class="nav-number">3.21.3.</span> <span class="nav-text">分支切割机 git rebase –onto master next topic</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">4.</span> <span class="nav-text">远程仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%88%96%E4%BF%AE%E6%94%B9%E5%85%A8%E5%B1%80-%E7%94%A8%E6%88%B7%E5%90%8D%E6%88%96%E9%82%AE%E7%AE%B1"><span class="nav-number">4.1.</span> <span class="nav-text">设置或修改全局 用户名或邮箱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-%E7%94%A8%E6%88%B7%E5%90%8D%E6%88%96%E9%82%AE%E7%AE%B1"><span class="nav-number">4.2.</span> <span class="nav-text">查看 用户名或邮箱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5-%E7%94%A8%E6%9D%A5%E5%92%8C%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-ssh-%E9%80%9A%E8%AE%AF%E5%8A%A0%E5%AF%86"><span class="nav-number">4.3.</span> <span class="nav-text">生成密钥 用来和远程仓库 ssh 通讯加密</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E5%85%AC%E9%92%A5-%E6%AF%94%E5%A6%82%E5%9C%A8Gitee-%E5%BC%80%E9%80%9A%E4%BF%A9%E4%B8%AA%E8%B4%A6%E5%8F%B7-%E5%B0%B1%E5%BF%85%E9%A1%BB%E8%A6%81%E6%9C%89%E4%BF%A9%E4%B8%AA%E5%85%AC%E9%92%A5"><span class="nav-number">4.4.</span> <span class="nav-text">配置多个公钥,比如在Gitee 开通俩个账号,就必须要有俩个公钥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%BA%93%E5%92%8C%E8%BF%9C%E7%A8%8B%E5%BA%93%E5%85%B3%E8%81%94"><span class="nav-number">4.5.</span> <span class="nav-text">本地库和远程库关联</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%83%85%E5%86%B5"><span class="nav-number">4.6.</span> <span class="nav-text">查看远程仓库情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-clone-%E8%BF%9C%E7%A8%8B%E6%8B%B7%E8%B4%9D%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="nav-number">4.7.</span> <span class="nav-text">git clone 远程拷贝到本地</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AA-clone-%E6%8C%87%E5%AE%9A%E7%9A%84%E5%88%86%E6%94%AF-git-clone-b-oneb-%E2%80%93single-branch"><span class="nav-number">4.7.1.</span> <span class="nav-text">只 clone 指定的分支 git  clone  -b  oneb  –single-branch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%8B%E9%9A%86%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9A%84%E7%9B%AE%E5%BD%95"><span class="nav-number">4.7.2.</span> <span class="nav-text">克隆到指定的目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#push-%E6%8E%A8%E9%80%81%E5%88%86%E6%94%AF%E7%9A%84%E5%86%85%E5%AE%B9%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">4.8.</span> <span class="nav-text">push 推送分支的内容到远程仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A8%E9%80%81%E6%8C%87%E5%AE%9A%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E5%88%B0%E8%BF%9C%E7%A8%8B"><span class="nav-number">4.8.1.</span> <span class="nav-text">推送指定的本地分支到远程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pull-%E6%89%80%E6%9C%89%E5%88%86%E6%94%AF"><span class="nav-number">4.8.2.</span> <span class="nav-text">pull 所有分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF-1"><span class="nav-number">4.8.3.</span> <span class="nav-text">删除远程分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#push-tags"><span class="nav-number">4.8.4.</span> <span class="nav-text">push tags</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#push-%E2%80%93force"><span class="nav-number">4.8.5.</span> <span class="nav-text">push –force</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-fetch-%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9B%B8%E5%AF%B9%E4%BA%8E%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E6%88%96%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%96%B0%E7%9A%84%E5%88%86%E6%94%AF-%E4%B8%8D%E4%BC%9A%E5%90%88%E5%B9%B6"><span class="nav-number">4.9.</span> <span class="nav-text">git fetch  获取远程仓库相对于本地仓库的更新或获取远程仓库新的分支,不会合并</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%9B%B4%E6%96%B0%E6%88%96%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%86%E6%94%AF"><span class="nav-number">4.9.1.</span> <span class="nav-text">获取更新或获取本地不存在的分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E6%9B%B4%E6%96%B0%E7%9A%84%E5%86%85%E5%AE%B9"><span class="nav-number">4.9.2.</span> <span class="nav-text">查看远程更新的内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%A8%8B%E6%9B%B4%E6%96%B0%E5%90%8E%E7%9A%84%E4%BF%A9%E7%A7%8D%E5%A4%84%E7%90%86%E5%8A%9E%E6%B3%95"><span class="nav-number">4.9.3.</span> <span class="nav-text">获取远程更新后的俩种处理办法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E5%88%A0%E9%99%A4%E4%BA%86%E5%88%86%E6%94%AF-%E4%BD%86%E6%98%AF%E6%9C%AC%E5%9C%B0%E8%BF%98%E4%BF%9D%E7%95%99%E4%B8%8E%E8%BF%9C%E7%A8%8B%E7%9A%84%E5%88%86%E6%94%AF%E7%9A%84%E5%BC%95%E7%94%A8%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%A6%82%E4%B8%8B%E5%91%BD%E4%BB%A4%E6%9B%B4%E6%96%B0%E6%9C%AC%E5%9C%B0%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%BC%95%E7%94%A8"><span class="nav-number">4.9.4.</span> <span class="nav-text">远程删除了分支,但是本地还保留与远程的分支的引用可以使用如下命令更新本地的远程分支引用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-pull-%E5%90%88%E5%B9%B6%E6%9C%AC%E5%9C%B0%E5%92%8C%E8%BF%9C%E7%A8%8B%E7%9A%84%E5%88%86%E6%94%AF"><span class="nav-number">4.10.</span> <span class="nav-text">git pull 合并本地和远程的分支</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#git-pull-%E6%8C%87%E5%AE%9A%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E5%88%B0%E5%BD%93%E5%89%8D%E5%88%86%E6%94%AF"><span class="nav-number">4.10.1.</span> <span class="nav-text">git pull 指定的远程分支合并到当前分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-pull-%E6%8C%87%E5%AE%9A%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E5%88%86%E6%94%AF"><span class="nav-number">4.10.2.</span> <span class="nav-text">git pull 指定的远程分支合并到指定的本地分支分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-pull-%E6%89%80%E6%9C%89%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="nav-number">4.10.3.</span> <span class="nav-text">git pull 所有分支合并到本地</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-pull-rebase-%E4%BB%A3%E6%9B%BF%E5%90%88%E5%B9%B6"><span class="nav-number">4.10.4.</span> <span class="nav-text">git pull rebase 代替合并</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-git-ls-remote-%E6%98%BE%E7%A4%BA%E8%BF%9C%E7%A8%8B%E7%9A%84%E5%88%86%E6%94%AF%E5%8F%8A%E6%9C%80%E6%96%B0%E7%9A%84commit"><span class="nav-number">4.11.</span> <span class="nav-text">获取 git ls-remote   显示远程的分支及最新的commit</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#gitignore"><span class="nav-number">5.</span> <span class="nav-text">.gitignore</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99"><span class="nav-number">5.1.</span> <span class="nav-text">配置规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E5%88%AB%E5%A4%84%E7%90%86"><span class="nav-number">5.2.</span> <span class="nav-text">特别处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-hook"><span class="nav-number">6.</span> <span class="nav-text">git hook</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-%E8%A3%B8%E4%BB%93%E5%BA%93"><span class="nav-number">7.</span> <span class="nav-text">git 裸仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%8A%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E4%BB%93%E5%BA%93%E5%8F%98%E6%88%90%E8%A3%B8%E4%BB%93%E5%BA%93"><span class="nav-number">7.1.</span> <span class="nav-text">把一个普通仓库变成裸仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="nav-number">8.</span> <span class="nav-text">git 开发流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#git-flow-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83"><span class="nav-number">8.1.</span> <span class="nav-text">git flow (版本发布)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#github-flow-%E6%8C%81%E7%BB%AD%E5%8F%91%E5%B8%83"><span class="nav-number">8.2.</span> <span class="nav-text">github flow(持续发布)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gitlab-flow-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83-%E6%8C%81%E7%BB%AD%E5%8F%91%E5%B8%83"><span class="nav-number">8.3.</span> <span class="nav-text">gitlab flow (版本发布)(持续发布)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%9F%E7%90%86%E8%A7%A3%E9%87%8A"><span class="nav-number">9.</span> <span class="nav-text">原理解释</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#git-%E7%9B%AE%E5%BD%95"><span class="nav-number">9.1.</span> <span class="nav-text">git 目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-objects-%E7%9B%AE%E5%BD%95-%E4%BF%9D%E5%AD%98%E7%9A%84%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">9.2.</span> <span class="nav-text">查看 objects 目录 保存的到底是什么</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1-blob-%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%A4%A7%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.2.1.</span> <span class="nav-text">数据对象(blob)二进制大对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%91%E5%AF%B9%E8%B1%A1-tree-commit-%E6%8F%90%E4%BA%A4%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.2.2.</span> <span class="nav-text">树对象(tree) commit(提交对象)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tag-%E5%AF%B9%E8%B1%A1"><span class="nav-number">9.2.3.</span> <span class="nav-text">Tag 对象</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="nav-number">10.</span> <span class="nav-text">git 提交规范</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%B4%E9%83%A8"><span class="nav-number">10.1.</span> <span class="nav-text">头部</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">10.2.</span> <span class="nav-text">规范提交的方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%AF%84%E5%AE%A1"><span class="nav-number">11.</span> <span class="nav-text">代码评审</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hank Bai"
      src="/images/rocket.png">
  <p class="site-author-name" itemprop="name">Hank Bai</p>
  <div class="site-description" itemprop="description">全栈工程师</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="/1410199713@qq.com" title="E-Mail → 1410199713@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/BAI-HANK" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;BAI-HANK" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.alloyteam.com/nav/" title="http:&#x2F;&#x2F;www.alloyteam.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">Web前端导航</a>
        </li>
    </ul>
  </div>

        </div>
      </div>

      <div id="music163player" >
         <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=298 height=52 src="//music.163.com/outchain/player?type=2&id=5236281&auto=0&height=32">
         </iframe>
      </div><div>
  <br>
  <canvas id="canvasDiyBlock" style="width:60%;">当前浏览器不支持canvas，请更换浏览器后再试</canvas><script src="/js/custom/clock.js"></script>
</div>
      
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/BAI-HANK" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://bh.com/2022/05/29/git/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/rocket.png">
      <meta itemprop="name" content="Hank Bai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hank Blog">
      <meta itemprop="description" content="全栈工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="git 常用命令 | Hank Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          git 常用命令
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-29 20:21:11" itemprop="dateCreated datePublished" datetime="2022-05-29T20:21:11+08:00">2022-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-12-16 11:55:43" itemprop="dateModified" datetime="2022-12-16T11:55:43+08:00">2022-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>21k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>35 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="git-常用命令"><a href="#git-常用命令" class="headerlink" title="git 常用命令"></a>git 常用命令</h1><h2 id="一些认知"><a href="#一些认知" class="headerlink" title="一些认知"></a>一些认知</h2><p>  git 是一个复杂的软件,命令参数组合起来有上百种,掌握常用的就好了</p>
<span id="more"></span> 

<h2 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看常用命令</span></span><br><span class="line">$ git <span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#转到帮助文档查用法</span></span><br><span class="line">$ git <span class="built_in">help</span>  merge</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看命令的用法,没有上面的直观</span></span><br><span class="line">$ git merge -<span class="built_in">help</span></span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">$ git merge -h</span><br></pre></td></tr></table></figure>

<h2 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a>查看版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git --version  </span><br></pre></td></tr></table></figure>
<h2 id="配置用户信息"><a href="#配置用户信息" class="headerlink" title="配置用户信息"></a>配置用户信息</h2><p>安装完 Git 之后，要做的第一件事就是设置你的用户名和邮件地址,这一点很重要,<br>因为每一个 Git 提交都会使用这些信息，它们会写入到你的每一次提交中,不可更改.</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;your name&quot;</span></span><br><span class="line">$ git config --global user.email <span class="string">&quot;your_email@xxx.com&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="提交时转换为-unix-LF-检出时转换为-windows-CR-LF"><a href="#提交时转换为-unix-LF-检出时转换为-windows-CR-LF" class="headerlink" title="提交时转换为 unix LF,检出时转换为 windows CR LF"></a>提交时转换为 unix LF,检出时转换为 windows CR LF</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="提交包含混合换行符的文件时给出警告"><a href="#提交包含混合换行符的文件时给出警告" class="headerlink" title="提交包含混合换行符的文件时给出警告"></a>提交包含混合换行符的文件时给出警告</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.safecrlf warn</span><br></pre></td></tr></table></figure>


<h2 id="git-init-初始化仓库"><a href="#git-init-初始化仓库" class="headerlink" title="git init 初始化仓库"></a>git init 初始化仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前目录</span></span><br><span class="line">$ git init</span><br><span class="line"><span class="comment"># 指定目录</span></span><br><span class="line">$ git init <span class="built_in">dir</span></span><br></pre></td></tr></table></figure>

<h2 id="git-config-配置"><a href="#git-config-配置" class="headerlink" title="git config 配置"></a>git config 配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置当前仓库</span></span><br><span class="line">$ git config -e</span><br><span class="line"><span class="comment"># 全家配置</span></span><br><span class="line">$ git config -e --global</span><br><span class="line"><span class="comment"># 显示当前的配置</span></span><br><span class="line">$ git config --list</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置当前仓库提交代码的用户信息 [--global] 配置全局的</span></span><br><span class="line">$ git config [--global] user.name <span class="string">&quot;[name]&quot;</span></span><br><span class="line">$ git config [--global] user.email <span class="string">&quot;[email address]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置别名</span></span><br><span class="line">$ git config --global alias.gl <span class="string">&quot;log --oneline --all  --graph&quot;</span></span><br></pre></td></tr></table></figure>

<p>当前仓库的配置的信息保存在用户的家目录下的.gitconfig 文件里</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ <span class="built_in">cat</span> .gitconfig</span><br></pre></td></tr></table></figure>

<p>也可以直接在这个文件进行配置</p>
<blockquote>
<p>[alias]</p>
<blockquote>
<p>gl = log –all  –graph  –oneline</p>
</blockquote>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/GitAlias/gitalias">别人配置好的参考链接</a></p>
<h2 id="git-mv-重命名文件-目录或移动文件-目录位置"><a href="#git-mv-重命名文件-目录或移动文件-目录位置" class="headerlink" title="git mv 重命名文件,目录或移动文件,目录位置"></a>git mv 重命名文件,目录或移动文件,目录位置</h2><p>重命名只影响工作区和暂存区,本地仓库还需要提交<br>git mv 执行了 shell 的 mv 指令将旧文件重命名为新文件,接着使用 git rm 命令删除旧文件,并使用 git add 添加新文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">mv</span>  oldFileName  newFileName</span><br></pre></td></tr></table></figure>

<h2 id="git-add-把代码加入暂存区"><a href="#git-add-把代码加入暂存区" class="headerlink" title="git add 把代码加入暂存区"></a>git add 把代码加入暂存区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过通配符 &#x27;.&#x27; 把当前目录内的文件全部加入暂存区 </span></span><br><span class="line">$  git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入指定的文件</span></span><br><span class="line">$  git add a.txt b.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入指定后缀名的文件</span></span><br><span class="line">$ git add *.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入目录及目录内的所有文件</span></span><br><span class="line">$ git add newDir</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入目录及指定的文件</span></span><br><span class="line">$ git add newDir/a.txt</span><br></pre></td></tr></table></figure>

<h2 id="git-commit-提交-commit-是-原子操作"><a href="#git-commit-提交-commit-是-原子操作" class="headerlink" title="git commit 提交 commit 是 原子操作"></a>git commit 提交 commit 是 原子操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#把暂存区的变更一次提交,原子操作</span></span><br><span class="line">$ git commit -m <span class="string">&#x27;提交的注释&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 工作区的文件更改后,不经过 git add 直接提交到本地仓库</span></span><br><span class="line">$ git commit -a -m <span class="string">&#x27;提交的注释&#x27;</span></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git commit -am <span class="string">&#x27;提交的注释&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码没有提交的远程仓库前对最近一次的commit 进行修改,不会新增一个commit 对象,会修改最近一次的commit 的 id </span></span><br><span class="line"><span class="comment"># 相应暂存区的代码也会一并提交到本地仓库, 也可以使用 -a 不经过 add</span></span><br><span class="line">$ git commit --amend</span><br><span class="line">$ git commit  -a --amend</span><br></pre></td></tr></table></figure>

<h2 id="git-rm-删除文件-删除后要进行一次提交才能同步"><a href="#git-rm-删除文件-删除后要进行一次提交才能同步" class="headerlink" title="git rm  删除文件,删除后要进行一次提交才能同步"></a>git rm  删除文件,删除后要进行一次提交才能同步</h2><ul>
<li><p>git rm 删除跟踪的文件<br>  同时从工作区和索引中删除文件,本地仓库还有</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">rm</span>  a.txt</span><br></pre></td></tr></table></figure>

<p>  删除目录及目录下的文件</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git  <span class="built_in">rm</span>  -r newDir</span><br></pre></td></tr></table></figure>

<p>  暂存区删除文件,工作目录保留文件,此文件不进行版本控制,本地仓库还有</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">rm</span> --cached a.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>git clean 删除未跟踪的文件<br>  提前看一下未跟踪文件,并不会删除</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -n</span><br></pre></td></tr></table></figure>

<p>  提前看一下未跟踪文件和目录,并不会删除</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -dn</span><br></pre></td></tr></table></figure>

<p>  删除未追踪的文件</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -f</span><br></pre></td></tr></table></figure>

<p>  删除未追踪的文件和目录 </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clean -<span class="built_in">df</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="git-ls-files-查看暂存区的文件信息"><a href="#git-ls-files-查看暂存区的文件信息" class="headerlink" title="git ls-files 查看暂存区的文件信息"></a>git ls-files 查看暂存区的文件信息</h2><p>可以通过git ls-files命令查看暂存区的文件信息。<br>参数信息如下，括号中是简写:</p>
<ul>
<li>--cached(-c)： 查看暂存区中文件。git ls-files命令默认执行此选项.</li>
<li>--midified(-m)：查看修改的文件。</li>
<li>--delete(-d)：查看删除过的文件。</li>
<li>--other(-o) ：查看没有被Git跟踪的文件。</li>
<li>--stage(-s)：显示 mode 以及文件对应的Blob对象，进而我们可以获取暂存区中对应文件里面的内容。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files  -s</span><br><span class="line">100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0   a</span><br></pre></td></tr></table></figure>


<h2 id="git-status-查看工作区文件的状态"><a href="#git-status-查看工作区文件的状态" class="headerlink" title="git status  查看工作区文件的状态"></a>git status  查看工作区文件的状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git status </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定文件的状态</span></span><br><span class="line">$ git status  a.txt b.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定后缀文件的状态</span></span><br><span class="line">$ git status  *.txt</span><br></pre></td></tr></table></figure>

<h2 id="git-diff-查看代码库差异"><a href="#git-diff-查看代码库差异" class="headerlink" title="git diff 查看代码库差异"></a>git diff 查看代码库差异</h2><h3 id="查看工作区和暂存区文件的差异"><a href="#查看工作区和暂存区文件的差异" class="headerlink" title="查看工作区和暂存区文件的差异"></a>查看工作区和暂存区文件的差异</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定文件的的差异</span></span><br><span class="line">$ git diff  a.txt b.txt</span><br><span class="line"></span><br><span class="line"> <span class="comment"># 查看指定后缀文件的差异</span></span><br><span class="line">$ git diff  *.txt</span><br></pre></td></tr></table></figure>
<h3 id="查看工作区和本地库的差异"><a href="#查看工作区和本地库的差异" class="headerlink" title="查看工作区和本地库的差异"></a>查看工作区和本地库的差异</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git diff  <span class="built_in">head</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以指定具体文件</span></span><br><span class="line">$ git diff  <span class="built_in">head</span>   a.txt</span><br></pre></td></tr></table></figure>

<h3 id="查看暂存区和本地仓库的差异"><a href="#查看暂存区和本地仓库的差异" class="headerlink" title="查看暂存区和本地仓库的差异"></a>查看暂存区和本地仓库的差异</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached</span><br><span class="line"><span class="comment">#可以指定具体文件</span></span><br><span class="line">$ git diff --cached  a.txt</span><br></pre></td></tr></table></figure>

<h3 id="查看俩个-commit-的差异"><a href="#查看俩个-commit-的差异" class="headerlink" title="查看俩个 commit 的差异"></a>查看俩个 commit 的差异</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比较俩个commit 差异</span></span><br><span class="line">$ git  diff commit1 commit2</span><br><span class="line"></span><br><span class="line"><span class="comment">#比较俩个 commit 差异,指定具体文件</span></span><br><span class="line">$ git  diff commit1 commit2  a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#比较当前分支最近俩次提交的差异</span></span><br><span class="line">$ git  diff <span class="built_in">head</span> <span class="built_in">head</span>^</span><br></pre></td></tr></table></figure>

<h2 id="git-log-查看-commit-历史"><a href="#git-log-查看-commit-历史" class="headerlink" title="git log 查看 commit 历史"></a>git log 查看 commit 历史</h2><p><strong>通过图形界面工具来查看版本历史 gitk</strong></p>
<p><strong>常规用法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment"># oneline 会将每个提交放在一行显示，在浏览大量的提交时非常有用</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">git <span class="built_in">log</span> --oneline</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出指定作者的提交</span></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --author=&lt;your name&gt;</span><br><span class="line"><span class="comment"># 列出所有分支的提交</span></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --all </span><br><span class="line"></span><br><span class="line"><span class="comment"># -p 展开显示每次提交的内容差异, 用 -2 则仅显示最近的两次更新</span></span><br><span class="line">$ git <span class="built_in">log</span> -p -2</span><br><span class="line"></span><br><span class="line"><span class="comment">#  --graph 选项，查看当前分支</span></span><br><span class="line">$ git <span class="built_in">log</span>  --graph </span><br><span class="line"></span><br><span class="line"><span class="comment">#  --graph --all  选项，查看历史中什么时候出现了分支、合并</span></span><br><span class="line">$ git <span class="built_in">log</span>  --graph --all </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某个分支的 </span></span><br><span class="line">$ git <span class="built_in">log</span> 分支名称 </span><br></pre></td></tr></table></figure>

<h3 id="git-blame-指定具体的文件查看"><a href="#git-blame-指定具体的文件查看" class="headerlink" title="git blame 指定具体的文件查看"></a>git blame 指定具体的文件查看</h3><p>blame 英文是归咎于的意思</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看指定文件的当前分支的 commit 记录</span></span><br><span class="line">$ git blame  a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定文件的指定分支的 commit 记录</span></span><br><span class="line">$ git blame  branchName  a.txt</span><br></pre></td></tr></table></figure>

<h3 id="shortlog-按提交者进行分组"><a href="#shortlog-按提交者进行分组" class="headerlink" title="shortlog 按提交者进行分组"></a>shortlog 按提交者进行分组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将commit按照作者分组,默认按照作者名字排序 -n 按 commit 数量排序</span></span><br><span class="line"><span class="comment"># 默认是在当前分支</span></span><br><span class="line">$ git  shortlog -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定分支</span></span><br><span class="line">$ git  shortlog feature -n</span><br><span class="line"></span><br><span class="line"><span class="comment">#所有分支</span></span><br><span class="line">$ git  shortlog -a -n</span><br></pre></td></tr></table></figure>

<h3 id="限制时间范围查询"><a href="#限制时间范围查询" class="headerlink" title="限制时间范围查询"></a>限制时间范围查询</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在那天之前</span></span><br><span class="line">$ git <span class="built_in">log</span> --after=<span class="string">&quot;2014-7-1&quot;</span></span><br><span class="line"><span class="comment">#在那天之前,在那天之后</span></span><br><span class="line">$ git <span class="built_in">log</span> --after=<span class="string">&quot;2014-7-1&quot;</span> --before=<span class="string">&quot;2014-7-4&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="过滤-merges-查询"><a href="#过滤-merges-查询" class="headerlink" title="过滤 merges 查询"></a>过滤 merges 查询</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认情况下git log会输出merge commit.  你可以通过--no-merges标记来过滤掉merge commit:</span></span><br><span class="line">$ git <span class="built_in">log</span> --no-merges</span><br><span class="line"><span class="comment"># 只输出 merges:</span></span><br><span class="line">$ git <span class="built_in">log</span> --merges</span><br></pre></td></tr></table></figure>

<h3 id="单独查询某个分支的提交"><a href="#单独查询某个分支的提交" class="headerlink" title="单独查询某个分支的提交"></a>单独查询某个分支的提交</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># master..feature这个range包含了在feature有而在master没有的所有commit</span></span><br><span class="line"><span class="comment"># 用查询分支单独的提交</span></span><br><span class="line">$ git <span class="built_in">log</span> master..feature</span><br></pre></td></tr></table></figure>

<h3 id="查询在某次提交后的所有提交"><a href="#查询在某次提交后的所有提交" class="headerlink" title="查询在某次提交后的所有提交"></a>查询在某次提交后的所有提交</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>  commitID</span><br></pre></td></tr></table></figure>

<h3 id="搜索提交历史-根据关键词"><a href="#搜索提交历史-根据关键词" class="headerlink" title="搜索提交历史,根据关键词"></a>搜索提交历史,根据关键词</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>  --grep [keyword]</span><br></pre></td></tr></table></figure>

<h3 id="查看所有的历史记录"><a href="#查看所有的历史记录" class="headerlink" title="查看所有的历史记录"></a>查看所有的历史记录</h3><p><strong>进行版本回退可以用此命令查询到 git log 没有追踪的一些 commit</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有的历史记录</span></span><br><span class="line">$ git reflog</span><br></pre></td></tr></table></figure>

<h4 id="查看分支的起点"><a href="#查看分支的起点" class="headerlink" title="查看分支的起点"></a>查看分支的起点</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git refolg show branchName</span><br></pre></td></tr></table></figure>

<h2 id="git-checkout-重置当前工作区文件与暂存区保持一致"><a href="#git-checkout-重置当前工作区文件与暂存区保持一致" class="headerlink" title="git checkout 重置当前工作区文件与暂存区保持一致"></a>git checkout 重置当前工作区文件与暂存区保持一致</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定具体文件</span></span><br><span class="line">$ git checkout  a.txt</span><br></pre></td></tr></table></figure>

<h2 id="git-reset-重置"><a href="#git-reset-重置" class="headerlink" title="git reset 重置"></a>git reset 重置</h2><p><strong>常用的 mixed 模式 ,重置暂存区的文件与上一次的提交(commit)保持一致,工作区文件内容保持不变</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git reset </span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">$ git reset  <span class="built_in">head</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以指定具体文件</span></span><br><span class="line">$ git reset  a.txt</span><br></pre></td></tr></table></figure>

<h3 id="hard-回退历史版本这个操作要谨慎-回退了代码很难找回来"><a href="#hard-回退历史版本这个操作要谨慎-回退了代码很难找回来" class="headerlink" title="hard 回退历史版本这个操作要谨慎,回退了代码很难找回来"></a>hard 回退历史版本这个操作要谨慎,回退了代码很难找回来</h3><p><em><strong>工作区，暂存区都会进行回退  HEAD master 进行了移动</strong></em><br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903602981601294">恢复方法参考</a></p>
<p>简单的只能恢复到指定的版本,但是未提交的代码就没有办法了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看所有提交的历史版本,找到恢复的commit id 628164</span></span><br><span class="line">$ git refolg</span><br><span class="line">$ git  reset --hard 3628164</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 回退上一个版本</span></span><br><span class="line">$ git reset  --hard <span class="built_in">head</span>^</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回退上上一个版本</span></span><br><span class="line">$ git reset  --hard <span class="built_in">head</span>^^</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回退指定 commit id 的版本</span></span><br><span class="line">git rest --hard 3628164</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以指定具体文件</span></span><br><span class="line">$ git reset  --hard <span class="built_in">head</span>^   a.txt</span><br></pre></td></tr></table></figure>


<h3 id="soft-回退"><a href="#soft-回退" class="headerlink" title="soft 回退"></a>soft 回退</h3><p><em><strong>工作区，暂存区不会回退  HEAD master 进行了移动</strong></em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 回退上一个版本</span></span><br><span class="line">$ git reset  --sof <span class="built_in">head</span>^</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回退上上一个版本</span></span><br><span class="line">$ git reset  --sof <span class="built_in">head</span>^^</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回退指定 commit id 的版本</span></span><br><span class="line">git rest --sof 3628164</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以指定具体文件</span></span><br><span class="line">$ git reset  --sof <span class="built_in">head</span>^   a.txt</span><br></pre></td></tr></table></figure>

<h3 id="mixed-回退-此参数也可不写"><a href="#mixed-回退-此参数也可不写" class="headerlink" title="mixed 回退,此参数也可不写"></a>mixed 回退,此参数也可不写</h3><p><em><strong>工作区不会回退,暂存区回退  HEAD master 进行了移动</strong></em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">回退上一个版本</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset  --mixed <span class="built_in">head</span>^</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset   <span class="built_in">head</span>^</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">回退上上一个版本</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset  --mixed <span class="built_in">head</span>^^</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">回退指定 commit <span class="built_in">id</span> 的版本</span></span><br><span class="line">git rest --mixed 3628164</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">可以指定具体文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset  --mixed <span class="built_in">head</span>^   a.txt</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="git-revert-撤销提交的-commit"><a href="#git-revert-撤销提交的-commit" class="headerlink" title="git revert 撤销提交的 commit"></a>git revert 撤销提交的 commit</h2><p>revert 英文恢复的意思</p>
<ul>
<li>使用-n是因为revert后，需要重新提交一个commit信息，然后在推送<br>如果不使用-n，指令后会弹出编辑器用于编辑提交信息<br>git revert -n commitId</li>
<li>可以同时撤销几个连续的 commit<br>git revert  commitIdA..commitIdB</li>
<li>git revert commitId  撤销某次的提交内容,会新生产一个 commit 反应撤销 commit 带来的变化<br>但是撤销的 commit 依然会保留在提交历史中</li>
</ul>
<p>可以撤销的类型</p>
<ul>
<li>普通的commit   git revert</li>
<li>merge commit  git revert -m</li>
</ul>
<ol>
<li><p>撤销普通的 commit<br> <strong>可以撤销任意一次或几次的 commit</strong></p>
<p> master 分支有三次 commit<br> 第一次 a47ae2d 增加a.txt 文件<br> 第二次e415435  增加b.txt 文件<br> 第三次21a340c  增加c.txt 文件</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span>  --oneline  --all  --graph</span></span><br><span class="line">* 21a340c (HEAD -&gt; master) a b c</span><br><span class="line">* e415435 a b</span><br><span class="line">* a47ae2d a</span><br></pre></td></tr></table></figure>

<p> 撤销倒数第一个 commit,其他保留</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git  revert  <span class="built_in">head</span>^</span> </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">或</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git  revert e415435</span></span><br><span class="line">Removing b.txt</span><br><span class="line">[master 9d399bc] Revert &quot;a b&quot;</span><br><span class="line">1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line">delete mode 100644 b.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">去除 e415435 的提交的文件 b.txt ,新生成一个 commit 9d399bc</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> commit 9d399bc  只包含  a.txt , c.txt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span>  --oneline  --all  --graph</span></span><br><span class="line">* 9d399bc (HEAD -&gt; master) Revert &quot;a b&quot;</span><br><span class="line">* 21a340c a b c</span><br><span class="line">* e415435 a b</span><br><span class="line">* a47ae2d a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">a.txt  c.txt</span><br></pre></td></tr></table></figure></li>
<li><p>撤销 merge commit</p>
<p> 当前的分支图</p>
 <pre class="mermaid">        graph LR
     d905789-.->388f80e
     head-.->d905789
     subgraph master
        d905789(d905789 master->a)
     end

     subgraph oneb
       388f80e(388f80e oneb->oneb a b) 
       3c856ad(3c856ad oneb->oneb a b c) 
       388f80e-->3c856ad
     end</pre>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --all  --graph  --oneline</span></span><br><span class="line">* 3c856ad (HEAD -&gt; oneb) oneb  a b c</span><br><span class="line">* 388f80e oneb a b</span><br><span class="line">* d905789 (master) master a</span><br></pre></td></tr></table></figure>

<p>合并分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout  master</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge --no-ff  oneb</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --all  --graph  --oneline</span></span><br><span class="line">*   b28c56f (HEAD -&gt; master) Merge branch &#x27;oneb&#x27;</span><br><span class="line">|\</span><br><span class="line">| * 3c856ad (oneb) oneb  a b c</span><br><span class="line">| * 388f80e oneb a b</span><br><span class="line">|/</span><br><span class="line">* d905789 master a</span><br></pre></td></tr></table></figure>

<pre class="mermaid">        graph LR
     d905789-.->388f80e
     3c856ad-.->b28c56f
     head-.->b28c56f
     subgraph master
       d905789(d905789 master->a)
       b28c56f(b28c56f master -> Merge branch 'oneb') 
       d905789-->b28c56f
     end

     subgraph oneb
       388f80e(388f80e oneb->oneb a b) 
       3c856ad(3c856ad oneb->oneb a b c) 
       388f80e-->3c856ad
     end</pre>

<p><strong>撤销合并 git revert -m 1或2</strong> </p>
<blockquote>
<p>1 代表 merge commit 需要合并的分支  2代表被合并进来的分支</p>
</blockquote>
<p> 保留历史提交 commit ,取消合并后 生成了一个新的 commit id 29388db<br> 29388db 的内容已经回复成 merge 前的内容,只有 a.txt 文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> git revert -m  1  b28c56f</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --all  --graph  --oneline</span></span><br><span class="line">* 29388db (HEAD -&gt; master) Revert &quot;Merge branch &#x27;oneb&#x27;&quot;</span><br><span class="line">*   b28c56f Merge branch &#x27;oneb&#x27;</span><br><span class="line">|\</span><br><span class="line">| * 3c856ad (oneb) oneb  a b c</span><br><span class="line">| * 388f80e oneb a b</span><br><span class="line">|/</span><br><span class="line">* d905789 master a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">a.txt </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="tag-管理"><a href="#tag-管理" class="headerlink" title="tag 管理"></a>tag 管理</h2><h3 id="tag-有俩种类型"><a href="#tag-有俩种类型" class="headerlink" title="tag 有俩种类型"></a>tag 有俩种类型</h3><ol>
<li>轻量级标签<br>轻量级标签本质上是提交的”书签”，它们只是一个名称和指向提交的指针<br>用于创建指向相关提交的快速链接</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git  tag v1</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>带注解的 tag -a 会生成创建者,创建时间,备注的元数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git  tag -a v1 -m <span class="string">&quot;注释&quot;</span></span><br><span class="line">$ git show v1</span><br><span class="line">tag v1</span><br><span class="line">Tagger: someone &lt;xxx@gmail.com&gt;</span><br><span class="line">Date:   Wed May 11 17:32:52 2022 +0800</span><br><span class="line">注释</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="增加-tag"><a href="#增加-tag" class="headerlink" title="增加 tag"></a>增加 tag</h2><p>在当前的分支最新的 commit 上增加 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag  tagName</span><br></pre></td></tr></table></figure>

<p>为某个commit 增加 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag  tagName  commitID</span><br></pre></td></tr></table></figure>

<h3 id="查询-tag"><a href="#查询-tag" class="headerlink" title="查询 tag"></a>查询 tag</h3><p>查询所有分支的 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br></pre></td></tr></table></figure>

<p>过滤需要的tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -l V1.*</span><br></pre></td></tr></table></figure>

<h2 id="删除-tag"><a href="#删除-tag" class="headerlink" title="删除 tag"></a>删除 tag</h2><p>删除本地 tag,可以一次删除多个 tag , 多个 tag 用空格隔开</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d  tagName</span><br></pre></td></tr></table></figure>

<p>删除远程 tag,可以一次删除多个 tag , 多个 tag 用空格隔开</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push  origin  -d  tagName</span><br></pre></td></tr></table></figure>

<h2 id="重命名-tag"><a href="#重命名-tag" class="headerlink" title="重命名 tag"></a>重命名 tag</h2><p>在需要删除的 tagOld 处命名新 tagNew,之后在删除 tagOld</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag tagNew tagOld</span><br><span class="line">$ git tag -d  tagOld</span><br></pre></td></tr></table></figure>

<h2 id="推送-tag-到远程仓库"><a href="#推送-tag-到远程仓库" class="headerlink" title="推送 tag 到远程仓库"></a>推送 tag 到远程仓库</h2><p>将本地有, 但是服务器上没有的的标签都push到远程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发送指定的 tag,可以发送多个 tag,用逗号隔开</span></span><br><span class="line">$ git push origin  tagName</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一次发送所有的 tags</span></span><br><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure>

<h1 id="head-detached-head-分离状态"><a href="#head-detached-head-分离状态" class="headerlink" title="head detached head 分离状态"></a>head detached head 分离状态</h1><p>head 分离状态意思是 head 没有指向当前分支的最新commit或就根本没有指向本地分支</p>
<h2 id="git-checkout-commitId-移动-head-到指定的-commitId-head-就会进入分离状态"><a href="#git-checkout-commitId-移动-head-到指定的-commitId-head-就会进入分离状态" class="headerlink" title="git checkout commitId 移动 head 到指定的 commitId head 就会进入分离状态"></a>git checkout commitId 移动 head 到指定的 commitId head 就会进入分离状态</h2><p><strong>没有指向当前分支的最新commit</strong></p>
<p>当前分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --oneline --all</span><br><span class="line">8f5527e (HEAD -&gt; oneb) oneb1</span><br><span class="line">7b89a07 (master) master main1,2,3</span><br><span class="line">36c1746 master main1,2</span><br><span class="line">d62fd44 master main1</span><br></pre></td></tr></table></figure>

<p><strong>执行 git checkout commitId 后,在处于分离状态的head 的基础上提交的 commit 不能 merge,<br>如果离开当前的游离head,提交的 commit 会被回收</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout     36c1746</span><br><span class="line">Note: switching to <span class="string">&#x27;36c1746&#x27;</span>.</span><br><span class="line">You are <span class="keyword">in</span> <span class="string">&#x27;detached HEAD&#x27;</span> state.</span><br><span class="line"></span><br><span class="line"><span class="comment"># head 指向的 36c1746 就是游离的head</span></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --all</span><br><span class="line">8f5527e (oneb) oneb1</span><br><span class="line">7b89a07 (master) master main1,2,3</span><br><span class="line">36c1746 (HEAD) master main1,2</span><br><span class="line">d62fd44 master main1</span><br><span class="line"></span><br><span class="line"><span class="comment">#在这个游离的head--&gt;36c1746 基础上增加 commit--&gt;dc902b6</span></span><br><span class="line">* dc902b6 (HEAD) 游离<span class="built_in">head</span>基础上增加的内容</span><br><span class="line">| * 8f5527e (oneb) oneb1</span><br><span class="line">| * 7b89a07 (master) master main1,2,3</span><br><span class="line">|/</span><br><span class="line">* 36c1746 master main1,2</span><br><span class="line">* d62fd44 master main1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到别的分支,在游离态基础上增加的 commit 不会被保持</span></span><br><span class="line">$ git  checkout    oneb</span><br><span class="line">Warning: you are leaving 1 commit behind, not connected to</span><br><span class="line">any of your branches</span><br><span class="line">dc902b6 游离<span class="built_in">head</span>基础上增加的内容</span><br><span class="line">If you want to keep it by creating a new branch, this may be a good time</span><br><span class="line">to <span class="keyword">do</span> so with:</span><br><span class="line">git branch &lt;new-branch-name&gt; dc902b6</span><br><span class="line">Switched to branch <span class="string">&#x27;oneb&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 游离态增加的commit 没有了</span></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --all  --graph</span><br><span class="line">* 8f5527e (HEAD -&gt; oneb) oneb1</span><br><span class="line">* 7b89a07 (master) master main1,2,3</span><br><span class="line">* 36c1746 master main1,2</span><br><span class="line">* d62fd44 master main1</span><br></pre></td></tr></table></figure>

<p><strong>如果要保存游离态增加的commit 需要增加一个分支和这些新增加的commit 绑定</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#给游离态增加分支</span></span><br><span class="line">$ git branch  twob dc902b6</span><br><span class="line">$ git <span class="built_in">log</span> --oneline --all  --graph</span><br><span class="line">* dc902b6 (HEAD, twob) 游离态增加的内容</span><br><span class="line">| * 8f5527e (oneb) oneb1</span><br><span class="line">| * 7b89a07 (master) master main1,2,3</span><br><span class="line">|/</span><br><span class="line">* 36c1746 master main1,2</span><br><span class="line">* d62fd44 master main1</span><br><span class="line"></span><br><span class="line"><span class="comment">#切换到master,</span></span><br><span class="line">$ git <span class="built_in">log</span> --oneline --all  --graph</span><br><span class="line">* dc902b6 (HEAD -&gt; twob) 游离态增加的内容</span><br><span class="line">| * 8f5527e (oneb) oneb1</span><br><span class="line">| * 7b89a07 (master) master main1,2,3</span><br><span class="line">|/</span><br><span class="line">* 36c1746 master main1,2</span><br><span class="line">* d62fd44 master main1</span><br></pre></td></tr></table></figure>


<h2 id="git-checkout-origin-branchName-或-git-checkout-remoteCommitId"><a href="#git-checkout-origin-branchName-或-git-checkout-remoteCommitId" class="headerlink" title="git checkout  origin/branchName 或 git checkout  remoteCommitId"></a>git checkout  origin/branchName 或 git checkout  remoteCommitId</h2><p><strong>切换到远程分支或切换到远程分支的 commitId,并且本地不存在对应的远程分支,就会进入分离状态</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --all  --oneline  --graph</span></span><br><span class="line">* 7f91e01 (HEAD -&gt; master, origin/master, origin/HEAD) add a.txt main1</span><br><span class="line">| * 25bc85b (origin/twob) add two.txt twob1</span><br><span class="line">|/</span><br><span class="line">| * 985951a (origin/oneb) add one.txt oneb1</span><br><span class="line">|/</span><br><span class="line">* c178a02 Initial commit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看远程分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git  branch  -r</span></span><br><span class="line">origin/HEAD -&gt; origin/master</span><br><span class="line">origin/master</span><br><span class="line">origin/oneb</span><br><span class="line">origin/twob</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看本地分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch</span></span><br><span class="line">master</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换到远程分支后 985951a 就成为游离的 <span class="built_in">head</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">git  branch oneb 生成本地相应的分支就会结束游离状态</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout  origin/oneb</span></span><br><span class="line">Note: switching to &#x27;origin/oneb&#x27;.</span><br><span class="line">You are in &#x27;detached HEAD&#x27; state.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --all  --oneline  --graph</span></span><br><span class="line">* 7f91e01 (origin/master, origin/HEAD, master) add a.txt main1</span><br><span class="line">| * 25bc85b (origin/twob) add two.txt twob1</span><br><span class="line">|/</span><br><span class="line">| * 985951a (HEAD, origin/oneb) add one.txt oneb1</span><br><span class="line">|/</span><br><span class="line">* c178a02 Initial commit</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<h1 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h1><h2 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h2><blockquote>
<p>创建分支最好切换回主分支后, 在当前的主分支 head 指针处 创建分支<br>不要在分支上在创建分支,管理起来太复杂</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在当前分支的最新 commit 处创建分支</span></span><br><span class="line">$ git branch  分支名字</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在某个commit 或 tag 处创建分支</span></span><br><span class="line">$ git  branch branchName commitId</span><br><span class="line">$ git  branch branchName tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在某个分支(basicBranchName)的基础上创建分支(branchName)</span></span><br><span class="line">$ git branch branchName  basicBranchName</span><br></pre></td></tr></table></figure>

<h2 id="创建一个无父分支"><a href="#创建一个无父分支" class="headerlink" title="创建一个无父分支"></a>创建一个无父分支</h2><p>这个指令的用法是拷贝当前分支的内容,但是不拷贝提交的 commit<br>拷贝内容会放入新分支的工作区和暂存区,需要提交一次才能进入仓库</p>
<p>基本不会用到</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git  checkout --orphan  pages</span><br></pre></td></tr></table></figure>

<h2 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h2><blockquote>
<p>切换head 到分支<br>切换分支的时候，Git 会用该分支的最后提交的快照替换你的工作目录的内容<br>所以多个分支不需要多个目录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git  checkout branchName</span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">$ git  switch  branchName</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回上一个分支</span></span><br><span class="line">$ git checkout -</span><br></pre></td></tr></table></figure>

<h2 id="创建并切换分支一起执行"><a href="#创建并切换分支一起执行" class="headerlink" title="创建并切换分支一起执行"></a>创建并切换分支一起执行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分支并切换到创建的分支</span></span><br><span class="line">$ git checkout -b branchName</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git  switch -c branchName</span><br></pre></td></tr></table></figure>

<p>在指定的commit 或 tag 处创建分支并切换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分支并切换到创建的分支</span></span><br><span class="line">$ git checkout -b branchName  commitId</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git  switch -c branchName tag</span><br></pre></td></tr></table></figure>

<p>在指定的分支处(basicBranchName)创建分支并切换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建分支并切换到创建的分支</span></span><br><span class="line">$ git checkout -b branchName  basicBranchName</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git  switch -c branchName basicBranchName</span><br></pre></td></tr></table></figure>

<h2 id="切换分支时有未提交的内容"><a href="#切换分支时有未提交的内容" class="headerlink" title="切换分支时有未提交的内容"></a>切换分支时有未提交的内容</h2><ol>
<li><p>切换时丢弃未提交的内容</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前分支有未提交的内容的情况下切换分支</span></span><br><span class="line"><span class="comment"># -f 丢弃当前分支未提交的修改 强制切换分支</span></span><br><span class="line">$ git checkout -f branchName</span><br></pre></td></tr></table></figure></li>
<li><p>切换时保持未提交的内容,切回来的时候可以恢复保持的内容<br>stash 英文是保存的意思</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果在切换分支时候不想丢弃工作目录的修改而且不想进行commit </span></span><br><span class="line"><span class="comment"># 对当前分支的现场进行保持,这个时候切到别到分支未提交二修改内容不会丢失</span></span><br><span class="line">$ git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切回保持的分支,查看保持的内容</span></span><br><span class="line">$ git stash list</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git show stash</span><br><span class="line"><span class="comment"># 切回保持的分支,恢复保持的内容,并删除保持的内容</span></span><br><span class="line">git stash pop</span><br><span class="line"><span class="comment"># 丢弃保持的内容</span></span><br><span class="line">git  stash clear</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="查看分支"><a href="#查看分支" class="headerlink" title="查看分支"></a>查看分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看本地的所有分支</span></span><br><span class="line">$ git branch</span><br></pre></td></tr></table></figure>

<h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除已经合并的分支,但是分支提交的 commit 会保留</span></span><br><span class="line">$ git branch -d twob</span><br><span class="line"><span class="comment"># 删除未合并的分支,在分支上创建的 commit 一并会被删除</span></span><br><span class="line">$ git branch -d -f twob</span><br></pre></td></tr></table></figure>

<h2 id="重命名分支名字"><a href="#重命名分支名字" class="headerlink" title="重命名分支名字"></a>重命名分支名字</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重命名当前分支</span></span><br><span class="line">$ git branch -m newBranchName</span><br><span class="line"><span class="comment"># 重命名指定分支oldBranchName</span></span><br><span class="line">$ git branch -m oldBranchName  newBranchName</span><br></pre></td></tr></table></figure>

<h2 id="比较分支差异"><a href="#比较分支差异" class="headerlink" title="比较分支差异"></a>比较分支差异</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比较俩个分支差异</span></span><br><span class="line">$ git  diff 分支1名字 分支2名字 </span><br><span class="line"><span class="comment">#比较俩个分支差异,指定具体文件</span></span><br><span class="line">$ git  diff 分支1名字 分支2名字 a.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比较俩个commit 差异</span></span><br><span class="line">$ git  diff commit1 commit2</span><br><span class="line"><span class="comment">#比较俩个 commit 差异,指定具体文件</span></span><br><span class="line">$ git  diff commit1 commit2  a.txt</span><br></pre></td></tr></table></figure>

<h2 id="查看各个分支最后一个提交对象的信息"><a href="#查看各个分支最后一个提交对象的信息" class="headerlink" title="查看各个分支最后一个提交对象的信息"></a>查看各个分支最后一个提交对象的信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -v</span><br></pre></td></tr></table></figure>

<h2 id="查看已经合并到当前分支的分支"><a href="#查看已经合并到当前分支的分支" class="headerlink" title="查看已经合并到当前分支的分支"></a>查看已经合并到当前分支的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看已经合并到当前分支的分支</span></span><br><span class="line">$ git branch --merge</span><br></pre></td></tr></table></figure>

<h2 id="查看未合并到当前分支的分支"><a href="#查看未合并到当前分支的分支" class="headerlink" title="查看未合并到当前分支的分支"></a>查看未合并到当前分支的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --no-merge</span><br></pre></td></tr></table></figure>

<h2 id="对远程分支管理"><a href="#对远程分支管理" class="headerlink" title="对远程分支管理"></a>对远程分支管理</h2><h3 id="新建远程分支"><a href="#新建远程分支" class="headerlink" title="新建远程分支"></a>新建远程分支</h3><p><strong>前提是本地要存在本地分支</strong></p>
<p>远程分支在本地没有直接新建的方法,通过 push 新建.<br>git push remote  localBranName:remoteBranName<br>需注意的是,分支的推送顺序写法是&lt;来源地&gt;:&lt;目的地&gt;<br>如果省略远程分支名则表示将本地分支推送到与之存在”追踪关系”的远程分支,如果远程分支不存在,则会被新建.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果远程不存在同名的 localBranName 分支,远程就会新建一个分支</span></span><br><span class="line">$ git  push o  localBranName</span><br><span class="line"><span class="comment"># 也可以指定远程的分支名字和本地不一致</span></span><br><span class="line">$ git  push o  localBranName:remoteBranName</span><br></pre></td></tr></table></figure>

<p><strong>在push 同时绑定本地和远程的的分支</strong><br> -u 等同于 set-upstream-to</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建一个和本地同名的远程分支并绑定</span></span><br><span class="line">$ git  push  o  -u localBranName</span><br><span class="line"><span class="comment"># 新建一个和本地不同名的原厂分支并绑定</span></span><br><span class="line">$ git  push  o  -u localBranName:remoteBranName</span><br></pre></td></tr></table></figure>

<h3 id="查看远程分支"><a href="#查看远程分支" class="headerlink" title="查看远程分支"></a>查看远程分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看原创分支</span></span><br><span class="line">$ git branch -r</span><br><span class="line"><span class="comment">#查看本地和远程分支</span></span><br><span class="line">$ git branch -a</span><br></pre></td></tr></table></figure>


<h3 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h3><p>删除远程分支在本地的引用,远程仓库并不会删除此分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -r -d  origin/branchName</span><br></pre></td></tr></table></figure>


<p><strong>删除远程分支及本地的引用</strong></p>
<ol>
<li>方法1<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#省略本地分支名相当于推送了一个空的本地分支到远程分支上，就相当于删除了远程分支</span></span><br><span class="line">$ git push origin   :branchName</span><br></pre></td></tr></table></figure></li>
<li>方法2 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin -d branchName</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="本地分支和指定的远程分支建立追踪关系"><a href="#本地分支和指定的远程分支建立追踪关系" class="headerlink" title="本地分支和指定的远程分支建立追踪关系"></a>本地分支和指定的远程分支建立追踪关系</h2><h3 id="建立绑定关系"><a href="#建立绑定关系" class="headerlink" title="建立绑定关系"></a>建立绑定关系</h3><p><strong>远程仓库的远程分支存在的情况下,进行绑定</strong></p>
<ol>
<li><p>--track </p>
<blockquote>
<p>本地分支不存在的情况下,建立本地分支并和远程分支进行绑定<br>git branch –track localBranchName RemoteBranchName<br>或<br>git checkout –track localBranchName RemoteBranchName</p>
</blockquote>
<p> 远程仓库存在分支 o/rBran</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取远程分支 rBran</span></span><br><span class="line">$ git fetch o  rBran</span><br><span class="line"><span class="comment"># 在本地建立分支 localBran 并绑定远程分支 rBran</span></span><br><span class="line">$ git branch --track localBran  o/rBran</span><br><span class="line"></span><br><span class="line"><span class="comment"># 因为建立了 localBran --&gt;o/rBran </span></span><br><span class="line"><span class="comment"># 的绑定关系,所以在任何分支都可以执行下面命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如过没有绑定关系执行下面命令,会在远程仓库兴建一个 </span></span><br><span class="line"><span class="comment"># localBran 分支,而不是 rBran</span></span><br><span class="line"><span class="comment"># 或者的执行 git push o localBran:rBran 来明确的表达来源和去向</span></span><br><span class="line"><span class="comment"># 建立绑定关系就知道 push o localBran 到远程的仓库是 rBran</span></span><br><span class="line">$ git push o localBran</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果当前分支在 localBran,可以直接执行如下命令</span></span><br><span class="line">$ git push o</span><br></pre></td></tr></table></figure>
</li>
<li><p>--set-upstream-to 或 -u</p>
<blockquote>
<p>本地分支存在的情况下,和远程分支进行绑定<br>git branch  –set-upstream-to=RemoteBranchName  localBranchName<br>--set-upstream-to 可以用 -u 代替<br>git branch  -u RemoteBranchName  localBranchName</p>
</blockquote>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立本地分支 localBran</span></span><br><span class="line">$ git branch  localBran</span><br><span class="line"><span class="comment"># 拉去远程分支 rBran</span></span><br><span class="line">$ git fetch   o  rBran</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置本地的分支 localBran 的上游分支是 rBran</span></span><br><span class="line"><span class="comment"># 如果当前分支是 localBran 可以省去 localBran</span></span><br><span class="line">$ git branch  --set-upstream-to=rBran  localBran</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git branch  -u rBran  localBran</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立绑定关系 就知道 push o localBran 到远程的仓库是 rBran</span></span><br><span class="line">$ git push o localBran</span><br><span class="line"><span class="comment"># 如果当前分支在 localBran,可以直接执行如下命令</span></span><br><span class="line">$ git push o</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="查看本地和远程分支的关联"><a href="#查看本地和远程分支的关联" class="headerlink" title="查看本地和远程分支的关联"></a>查看本地和远程分支的关联</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> $ git remote show origin</span><br><span class="line"> <span class="comment"># 或</span></span><br><span class="line"> <span class="comment"># oneb 和 origin/oneb 进行了绑定</span></span><br><span class="line"> $ git branch -vv</span><br><span class="line"> master 99dbe1d v1</span><br><span class="line">*oneb   527f5a4 [origin/oneb] v2</span><br><span class="line"> twob   1872f80 v3</span><br></pre></td></tr></table></figure>

<h2 id="删除在远程仓库不存在-但是本地存在的引用分支"><a href="#删除在远程仓库不存在-但是本地存在的引用分支" class="headerlink" title="删除在远程仓库不存在,但是本地存在的引用分支"></a>删除在远程仓库不存在,但是本地存在的引用分支</h2><blockquote>
<p>git remote prune origin<br>可以用 git fetch p 代替<br>prune 英文修剪修整的意思,stale 英文不新鲜的<br><strong>如果远程的某些分支删除了,但是本地任然保留远程分支的引用,可通过以下命令删除这些引用</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  查看远程分支的情况,threeb 已经在远程被删除了</span></span><br><span class="line">$ git remote   show  o</span><br><span class="line">* remote o</span><br><span class="line">  Fetch URL: git@gitee.com:someone_repos/test.git</span><br><span class="line">  Push  URL: git@gitee.com:someone_repos/test.git</span><br><span class="line">  HEAD branch: master</span><br><span class="line">  Remote branches:</span><br><span class="line">    master                tracked</span><br><span class="line">    oneb                  new (next fetch will store <span class="keyword">in</span> remotes/o)</span><br><span class="line">    refs/remotes/o/threeb stale (use <span class="string">&#x27;git remote prune&#x27;</span> to remove)</span><br><span class="line"></span><br><span class="line"> <span class="comment"># 所有在被远程仓库删除的分支,但被本地依然保留的,删除掉</span></span><br><span class="line"> $ git remote prune origin</span><br><span class="line"> <span class="comment"># 或 可以通过指定名字的方式删除本地引用</span></span><br><span class="line"> $ git branch -d -r o/threeb</span><br></pre></td></tr></table></figure>

<h2 id="更新本地远程分支的引用"><a href="#更新本地远程分支的引用" class="headerlink" title="更新本地远程分支的引用"></a>更新本地远程分支的引用</h2><blockquote>
<p>git remote update origin –prune 不常用<br>可以用 git fetch origin 代替</p>
</blockquote>
<p><strong>会把远程分支的更新或本地不存在的远程分支更新到本地</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote update origin --prune</span><br></pre></td></tr></table></figure>


<h2 id="git-merge-–ff-快进合并-或-–no-ff-不快进合并-无冲突合并"><a href="#git-merge-–ff-快进合并-或-–no-ff-不快进合并-无冲突合并" class="headerlink" title="git merge  –ff(快进合并)  或 –no-ff(不快进合并). 无冲突合并"></a>git merge  –ff(快进合并)  或 –no-ff(不快进合并). 无冲突合并</h2><p>git 合并两个分支时，如果顺着一个分支走下去可以到达另一个分支的话，那么 Git 在合并两者时，只会简单地把指针右移，叫做快进 fast-forward，合并不需要要解决冲突,分支修改覆盖主分支.</p>
<p><strong>如图 oneb 分支是在主分支最后一次commit 处开始的</strong> 如果合并分支的化,只是简单的移动head 到 7f6ed0c commit处 ,oneb 分支的修改会覆盖主分支。</p>
<p>merge 前</p>
<pre class="mermaid">    graph  LR
    head -.->cddaf35
    cddaf35 -.->1ccf9fa
    subgraph  主分支
    3b60fae(master 3b60fae->main1) --> cddaf35(master cddaf35->main1 main2 )
    end
    subgraph oneb 分支
    1ccf9fa[oneb 1ccf9fa->onebone main2]
    1ccf9fa-->7f6ed0c[oneb 7f6ed0c->onebone onebtwo]
    end</pre>

<p>git merge –ff</p>
<pre class="mermaid">    graph  LR
    head -.->master
    master -.->7f6ed0c
    oneb -.->7f6ed0c
    subgraph  主分支
    cddaf35 -->1ccf9fa
    3b60fae(master 3b60fae->main1) --> cddaf35(master cddaf35->main1 main2)
    1ccf9fa[oneb 1ccf9fa->onebone main2]
    1ccf9fa-->7f6ed0c[oneb 7f6ed0c->onebone onebtwo]
    end</pre>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$  git <span class="built_in">log</span>  --all  --graph  --oneline</span><br><span class="line">* 7f6ed0c (oneb) onebone,two</span><br><span class="line">* 1ccf9fa onebone,main2</span><br><span class="line">* cddaf35 (HEAD -&gt; master) main1,2</span><br><span class="line">* 3b60fae master main1</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git merge oneb 等同于 git merge --ff oneb</span></span><br><span class="line">$ git merge oneb</span><br><span class="line">Updating cddaf35..7f6ed0c</span><br><span class="line">Fast-forward</span><br><span class="line">a.txt | 4 ++--</span><br><span class="line">1 file changed, 2 insertions(+), 2 deletions(-)</span><br></pre></td></tr></table></figure>

<p>master 合并前 a.txt 最后的内容是  main1 main2, oneb 合并前 a.txt 最后的内容是 oneb1 oneb2<br>合并后 master 的内容 a.txt 被 oneb 分支覆盖了,不需要解决冲突的问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">onebone</span><br><span class="line">onebtwo</span><br></pre></td></tr></table></figure>
<ol>
<li><p>直接使用 git merge –ff oneb 的弊端</p>
<p> 把分支 oneb 俩次 commit 也混入主分支,主分支的 commit 不干净了,这种情况下如果对 master 分支进行回退,会引起混乱.<br> 因为 master 主分支是稳定的,如果回退到 oneb 分支的某次 commit ,代码的状态就不稳定了,合并后主分支的 commit log<br> 是四次,最后俩个 commit  是混入 oneb 分支的 commit</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>  --oneline  --all  --graph</span><br><span class="line">* 7f6ed0c (HEAD -&gt; master, oneb) onebone,two</span><br><span class="line">* 1ccf9fa onebone,main2</span><br><span class="line">* cddaf35 main1,2</span><br><span class="line">* 3b60fae master main1</span><br></pre></td></tr></table></figure>
<p>  回退上一个版本的情况,回退到 oneb 分支的第一个 commit 了</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git  reset  --hard  <span class="built_in">head</span>^</span><br><span class="line">HEAD is now at 1ccf9fa onebone,main2</span><br><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">onebone</span><br><span class="line">main2</span><br></pre></td></tr></table></figure></li>
<li><p>git merge –no-ff  oneb ,不使用快进,不会把 oneb  分支的 commit 混入 master</p>
<p> <strong>依然会保留合并的 commit 但是回退上一个版本,不会回退到合并的分支 commit 上去</strong></p>
</li>
</ol>
 <pre class="mermaid">    graph  LR
    head -.->master
    master -.->af728a8
    oneb -.->7f6ed0c
    subgraph  主分支
    3b60fae(master 3b60fae->main1) --> cddaf35(master cddaf35->main1 main12)
    1ccf9fa[oneb 1ccf9fa->onebone main2]
    1ccf9fa-.-> 7f6ed0c[oneb 7f6ed0c->->onebone onebtwo]
    7f6ed0c-.-> af728a8(master af728a8->onebone onebtwo)
    cddaf35--> af728a8
    cddaf35-.-> 1ccf9fa

    end</pre>

  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ git  merge  --no-ff   oneb  -m <span class="string">&quot;master 合并了 oneb 分支&quot;</span></span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line">a.txt | 4 ++--</span><br><span class="line">1 file changed, 2 insertions(+), 2 deletions(-) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并后主分支新增了一个 commit,但是没有引入 oneb 分支的俩个 commit</span></span><br><span class="line">$ git <span class="built_in">log</span>  --oneline  --all  --graph</span><br><span class="line">*  af728a8 (HEAD -&gt; master) master 合并了 oneb 分支</span><br><span class="line">|\</span><br><span class="line">| * 7f6ed0c (oneb) onebone,two</span><br><span class="line">| * 1ccf9fa onebone,main2</span><br><span class="line">|/</span><br><span class="line">* cddaf35 main1,2</span><br><span class="line">* 3b60fae master main1</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span>  a.txt</span><br><span class="line">onebone</span><br><span class="line">onebtwo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以看到 master 回退上一个版本是回退到自己上一个 commit</span></span><br><span class="line">$ git  reset  --hard   <span class="built_in">head</span>^</span><br><span class="line">HEAD is now at cddaf35 main1,2</span><br></pre></td></tr></table></figure>

<h2 id="git-merge-–squash-合并时合并分支的多个commit-为一个-新生成的-commit"><a href="#git-merge-–squash-合并时合并分支的多个commit-为一个-新生成的-commit" class="headerlink" title="git merge –squash 合并时合并分支的多个commit 为一个 新生成的 commit"></a>git merge –squash 合并时合并分支的多个commit 为一个 新生成的 commit</h2><p>squash 英文挤压的意思</p>
<blockquote>
<p>不论合并进来的的分支 oneb 有多少commit 都不会进入 master 分支,只是把分支的代码进来合并,<br>分支的 commit 不会混入,代码合并后只是合并了工作区和暂存区,要进行一次提交,合并的内容才能进入仓库.<br>比 –no-ff 更彻底</p>
</blockquote>
<pre class="mermaid">    graph  LR
    head -.-> master
    master -.-> e98d0e9
    cddaf35-.-> 1ccf9fa
    subgraph  主分支
    3b60fae(master 3b60fae->main1) --> cddaf35(master cddaf35->main1 main12)
    cddaf35-->e98d0e9(master e98d0e9-> squash oneb) 
   
    end

    subgraph  oneb 分支
     
       1ccf9fa[oneb 1ccf9fa->onebone main2]---> 7f6ed0c[oneb 7f6ed0c->->onebone onebtwo]
     end</pre>


<p>在master 分支执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --squash  oneb</span><br><span class="line">Updating cddaf35..7f6ed0c</span><br><span class="line">Fast-forward</span><br><span class="line">Squash commit -- not updating HEAD</span><br><span class="line">a.txt | 4 ++--</span><br><span class="line">1 file changed, 2 insertions(+), 2 deletions(-)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行完上面命令后,用 oneb 分支的俩个 commit 覆盖了 a.txt 文件 </span></span><br><span class="line"><span class="comment"># 此时 master 并没有混入 oneb 分支的俩个 commit </span></span><br><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">onebone</span><br><span class="line">onebtwo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并的是影响了工作区和暂存区,需要在提交一次到仓库</span></span><br><span class="line"><span class="comment"># 此时 master 分支只有俩个 commit</span></span><br><span class="line">$ git commit -m  <span class="string">&quot;squash oneb&quot;</span></span><br><span class="line">[master e98d0e9] squash oneb</span><br><span class="line">1 file changed, 2 insertions(+), 2 deletions(-)</span><br><span class="line"></span><br><span class="line"><span class="comment"># master 分支合并oneb 分支后文件二内容</span></span><br><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">onebone</span><br><span class="line">onebtwo</span><br></pre></td></tr></table></figure>

<h2 id="git-merge-有冲突-不符合快速合并"><a href="#git-merge-有冲突-不符合快速合并" class="headerlink" title="git merge 有冲突,不符合快速合并"></a>git merge 有冲突,不符合快速合并</h2><p><strong>git mergetool 可以打开一个界面查看冲突</strong></p>
<p>三个分支 master, oneb, twob</p>
<pre class="mermaid">    graph  LR
    head--> 73217f6
    e96e045 -.->73217f6(73217f6 1 one)
    e96e045 -.->74572ac(74572ac 1 two)
    subgraph master
        e96e045(e96e045 1)
    end

    subgraph oneb
        73217f6
    end
    
    subgraph twob
        74572ac
    end</pre>

<p>合并 oneb merge twob 手工解决冲突</p>
<pre class="mermaid">    graph  LR
    head--> 5bc8622(1 one two)
    e96e045 -.->73217f6(73217f6 1 one)
    e96e045 -.->74572ac(74572ac 1 two)
    subgraph master
        e96e045(e96e045 1)
    end

    subgraph oneb
        73217f6 -->5bc8622
    end
    
    subgraph twob
        74572ac-.->5bc8622
    end</pre>

<p>解决冲突</p>
<ol>
<li><p>当前有俩个分支 oneb , twob</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>  --oneline  --graph  --all</span><br><span class="line">* 74572ac (twob) twob  1 two</span><br><span class="line">| * 73217f6 (HEAD -&gt; oneb) oneb 1 one</span><br><span class="line">|/</span><br><span class="line">* e96e045 (master) master 1</span><br></pre></td></tr></table></figure></li>
<li><p>当前分支 oneb 执行合并 twob,有冲突</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git merge  twob</span><br><span class="line">Auto-merging a.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> a.txt</span><br><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="3">
<li><p>冲突的内容, 内容 one 和 two 冲突了</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span>  a.txt</span><br><span class="line">1</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="string">HEAD  #当前分支</span></span><br><span class="line"><span class="string">one</span></span><br><span class="line"><span class="string">=======       # 分支分割线  </span></span><br><span class="line"><span class="string">two</span></span><br><span class="line"><span class="string">&gt;&gt;&gt;&gt;&gt;&gt;&gt; twob` #要合并的分支</span></span><br></pre></td></tr></table></figure></li>
<li><p>合并产生的冲突解决方法</p>
</li>
</ol>
<ul>
<li><p>手工修改冲突部分,修改文件选择要保留的部分执行  </p>
<p> 修改后执行 git add a.txt, git commit </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git  <span class="built_in">log</span>  --oneline  --all  --graph</span><br><span class="line">*   5bc8622 (HEAD -&gt; oneb) Merge branch <span class="string">&#x27;twob&#x27;</span> into oneb</span><br><span class="line">|\</span><br><span class="line">| * 5ad4825 (twob) two  1  two</span><br><span class="line">* | 27a637a oneb  1 one</span><br><span class="line">|/</span><br><span class="line">* 2c72eba (master) master  1</span><br></pre></td></tr></table></figure></li>
<li><p>放弃合并</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --abort</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="5">
<li><p>合并后的分支没有存在的意义了,删除</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d twob</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="rebase-合并变基"><a href="#rebase-合并变基" class="headerlink" title="rebase 合并变基"></a>rebase 合并变基</h2><h3 id="对同一分支的多个commit-进行增删改"><a href="#对同一分支的多个commit-进行增删改" class="headerlink" title="对同一分支的多个commit 进行增删改"></a>对同一分支的多个commit 进行增删改</h3><blockquote>
<p>使用场景:<br>减少分支的 commit</p>
</blockquote>
<p> 合并前</p>
 <pre class="mermaid">  graph  LR
    head -.-> 320e2e8 
     subgraph 主分支
      652d566(652d566 master 1)-->    
      a181faa(a181faa  master 1 2)-->
      2ac075a(2ac075a master 3 4)-->
      320e2e8(320e2e8 master 5 6)
     end</pre>

<p>  <strong>git rebase -i   652d566  320e2e8</strong><br>  <strong>以 a181faa 为基底 把 2ac075a 和 320e2e8 合并进 a181faa,并生成一个新的 commit  080023d</strong></p>
<p> 合并后</p>
 <pre class="mermaid">  graph  LR
    head -.-> 080023d
      subgraph 主分支
       652d566(652d566 master 1) --> 
       080023d(080023d master 1 2  合并了2个 commit)
      end</pre>

<p> 当前主分支有4 个 commit </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>  --all  --graph  --oneline  -p</span><br><span class="line">* 320e2e8 (HEAD -&gt; master) master 5 6</span><br><span class="line">| diff --git a/a.txt b/a.txt</span><br><span class="line">| index beb3268..cd541f1 100644</span><br><span class="line">| --- a/a.txt</span><br><span class="line">| +++ b/a.txt</span><br><span class="line">| @@ -1,2 +1,2 @@</span><br><span class="line">|  1</span><br><span class="line">| -3 4</span><br><span class="line">| +5 6</span><br><span class="line">* 2ac075a master 3 4</span><br><span class="line">| diff --git a/a.txt b/a.txt</span><br><span class="line">| index 85f57a3..beb3268 100644</span><br><span class="line">| --- a/a.txt</span><br><span class="line">| +++ b/a.txt</span><br><span class="line">| @@ -1,2 +1,2 @@</span><br><span class="line">|  1</span><br><span class="line">| -1 2</span><br><span class="line">| +3 4</span><br><span class="line">* a181faa master 1 2</span><br><span class="line">| diff --git a/a.txt b/a.txt</span><br><span class="line">| index d00491f..85f57a3 100644</span><br><span class="line">| --- a/a.txt</span><br><span class="line">| +++ b/a.txt</span><br><span class="line">| @@ -1 +1,2 @@</span><br><span class="line">|  1</span><br><span class="line">| +1 2</span><br><span class="line">* 652d566 master 1</span><br><span class="line">diff --git a/a.txt b/a.txt</span><br><span class="line">new file mode 100644</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p>  -i 交互时操作, 652d566 在这个commit 之后的 commit 到 320e2e8 这个 commit 之间的 commit<br>  参与操作,是一个开闭区间,闭 commit 是最后一个 commit 可以不写</p>
<p>  需要操作的 commit 最新的在最后边,如果要合并,至少要有一个 pick 在最老的 commit 上<br>  如下把俩个 commit 合并到 a181faa</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 会出现交互节目进行配置变基</span></span><br><span class="line">$ git rebase -i   652d566  320e2e8</span><br><span class="line">p a181faa master 1 2</span><br><span class="line">s 2ac075a master 3 4</span><br><span class="line">s 320e2e8 master 5 6</span><br></pre></td></tr></table></figure>

<p>  如下合并后的情况,对修改做覆盖操作,最新的会覆盖最老的<br>  只是减少了 commit 的节点, 内容没有丢失,合并后会生成一个新的 commit </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git  <span class="built_in">log</span>  --all  --oneline  --graph</span><br><span class="line">* 080023d (HEAD -&gt; master) master 1 2  合并了2个 commit</span><br><span class="line">* 652d566 master 1</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">1</span><br><span class="line">5 6</span><br></pre></td></tr></table></figure>

<p>pick：保留该commit（缩写:p）<br>reword：保留该commit，但我需要修改该commit的注释（缩写:r）<br>edit：保留该commit, 但我要停下来修改该提交(不仅仅修改注释)（缩写:e）<br>squash：将该commit和前一个commit合并（缩写:s）<br>fixup：将该commit和前一个commit合并，但我不要保留该提交的注释信息（缩写:f）<br>exec：执行shell命令（缩写:x）<br>drop：我要丢弃该commit（缩写:d  </p>
<h3 id="不同分支的变基"><a href="#不同分支的变基" class="headerlink" title="不同分支的变基"></a>不同分支的变基</h3><blockquote>
<p>使用场景:<br>拉取远程仓库 master 分支,在此分支的基础上开了一个 fixBug 分支, fixBug 分支写好后,再次拉取<br>master 分支,此时 master 已经更新了,为了方便合并上去,对 fieBug 进行变基到 master 分支的最新 commit</p>
</blockquote>
<p><strong>当前的分支</strong></p>
<pre class="mermaid">  graph  LR
    69fd867(69fd867 -> master 1)
    8aeed24(8aeed24 -> master 1 2)
    720ab90(720ab90 -> master b.txt 1) 

    25d23df(25d23df -> oneb 1 3) 
    0fef2ef(0fef2ef -> oneb 1 3 4)

  subgraph master
    69fd867 --> 8aeed24
    8aeed24 --> 720ab90
  end
    
  subgraph oneb
    69fd867 --> 25d23df
    25d23df --> 0fef2ef
  end</pre>

<p><strong>git rebase master</strong><br><strong>对分支 oneb 变基后 更改 oneb 分支原来的基 master 69fd867 为 master 720ab90</strong></p>
<pre class="mermaid">  graph  LR
   69fd867(69fd867-> master 1)
   8aeed24(8aeed24-> master 1 2)
   720ab90(720ab90-> master b.txt 1) 


   625371d(625371d-> oneb 1 3   rebase  master) 
   4e96885(4e96885-> oneb 1 3 4 rebase  master)

  720ab90-->625371d
  subgraph master
    69fd867-->8aeed24
    8aeed24-->720ab90
  end
    
  subgraph oneb
    625371d-->4e96885
  end</pre>

<p>*<em>对分支 oneb 变基前的分支情况</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git  <span class="built_in">log</span>  --all  --oneline  --graph</span><br><span class="line">* 0fef2ef (HEAD -&gt; oneb) oneb 1 3 4</span><br><span class="line">* 25d23df oneb 1 3</span><br><span class="line">| * 720ab90 (master) master b.txt</span><br><span class="line">| * 8aeed24 master 1 2</span><br><span class="line">|/</span><br><span class="line">* 69fd867 master 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># master a.txt</span></span><br><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line"><span class="comment"># master b.txt</span></span><br><span class="line">$ <span class="built_in">cat</span> b.txt</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line"><span class="comment"># oneb a.txt</span></span><br><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>

<p><strong>上图oneb 分支在 69fd867 处开始分支，并提交 2次 commit,同时主分支在之后也提交 2次 commit</strong></p>
<p><strong>现在想要把 master 主分支的最新代码同步到 oneb 分支,但是不想要合并到主分支 可以把 对 oneb 进行变基</strong><br><strong>oneb 原来相对 master 的基是 69fd867,现在想切到最新的 720ab90</strong></p>
<p>在当前分支 oneb 上 执行 git rebase master,在 69fd867 之后,oneb 和 master 都对 a.txt 进行了修改,<br>同时 mater 还新增了一个 文件 b.txt,所以现在的冲突有俩个</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase master</span><br><span class="line">error: could not apply 25d23df... oneb 1 3</span><br><span class="line">Resolve all conflicts manually, mark them as resolved with</span><br><span class="line"><span class="string">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span>, <span class="keyword">then</span> run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">You can instead skip this commit: run <span class="string">&quot;git rebase --skip&quot;</span>.</span><br><span class="line">To abort and get back to the state before <span class="string">&quot;git rebase&quot;</span>, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line">Could not apply 25d23df... oneb 1 3</span><br><span class="line">Auto-merging a.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> a.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添新的文件 b.txt 会自动加入 </span></span><br><span class="line"><span class="comment"># 差异的文件,需要手工更新</span></span><br><span class="line">$ cat a.txt</span><br><span class="line"><span class="number">1</span></span><br><span class="line">++<span class="tag">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span></span><br><span class="line"><span class="tag"> +2</span></span><br><span class="line"><span class="tag">++=======</span></span><br><span class="line"><span class="tag">+ 3</span></span><br><span class="line"><span class="tag">++&gt;</span>&gt;&gt;&gt;&gt;&gt;&gt; <span class="number">25</span>d23df (oneb <span class="number">1</span> <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 手工修改 第一个冲突 oneb 25d23df commit 和 master  720ab90 commit冲突</span></span><br><span class="line">$ car a.txt</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">$ git add a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># oneb 25d23df 会被丢弃,用  625371d 代替,新的commit message:  oneb 1 3  rebase  master</span></span><br><span class="line">$ git rebase  --continue</span><br><span class="line">[detached HEAD  <span class="number">625371</span>d] oneb <span class="number">1</span> <span class="number">3</span>  rebase  <span class="keyword">master</span></span><br><span class="line"></span><br><span class="line"><span class="title"># 第二个冲突</span></span><br><span class="line"><span class="title">$</span> car a.txt</span><br><span class="line"><span class="number">1</span></span><br><span class="line">++<span class="tag">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span></span><br><span class="line"><span class="tag"> +2</span></span><br><span class="line"><span class="tag"> +3</span></span><br><span class="line"><span class="tag">++=======</span></span><br><span class="line"><span class="tag">+ 3</span></span><br><span class="line"><span class="tag">+ 4</span></span><br><span class="line"><span class="tag">++&gt;</span>&gt;&gt;&gt;&gt;&gt;&gt; <span class="number">0</span>fef2ef (oneb <span class="number">1</span> <span class="number">3</span> <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次手工修改差异代码 oneb 0fef2ef 和 新的 oneb  625371d commit 冲突</span></span><br><span class="line">$ car a.txt</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line">$ git add a.txt</span><br><span class="line"><span class="comment"># oneb 0fef2ef 会被丢弃,用 4e96885 代替,新的 commit message oneb 1 3 4 rebase master</span></span><br><span class="line">$ git rebase  --continue</span><br><span class="line">[detached HEAD <span class="number">4</span>e96885] oneb <span class="number">1</span> <span class="number">3</span> <span class="number">4</span> rebase  <span class="keyword">master</span></span><br><span class="line"></span><br><span class="line"><span class="title"># rebase</span> 后 现在分支 </span><br><span class="line">$ git log  --all  --oneline  --graph</span><br><span class="line">* <span class="number">4</span>e96885 (HEAD -&gt; oneb) oneb <span class="number">1</span> <span class="number">3</span> <span class="number">4</span> rebase <span class="keyword">master</span></span><br><span class="line"><span class="title">* 625371d</span> oneb <span class="number">1</span> <span class="number">3</span> rebase  <span class="keyword">master</span></span><br><span class="line"><span class="title">* 720ab90</span> (<span class="literal">master</span>) <span class="keyword">master</span> <span class="title">b</span>.txt</span><br><span class="line">* <span class="number">8</span>aeed24 <span class="keyword">master</span> <span class="title">1</span> <span class="number">2</span></span><br><span class="line">* <span class="number">69</span>fd867 <span class="keyword">master</span> <span class="title">1</span></span><br><span class="line"></span><br><span class="line">oneb a.txt 经过俩次手工合并冲突后</span><br><span class="line">$ cat a.txt</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">oneb b.txt 是通过变基 <span class="keyword">master</span> <span class="title">获得的新文件</span></span><br><span class="line"><span class="title">$</span> cat b.txt</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="提取分支指定的几个-commit-到其他分支"><a href="#提取分支指定的几个-commit-到其他分支" class="headerlink" title="提取分支指定的几个 commit 到其他分支"></a>提取分支指定的几个 commit 到其他分支</h2><blockquote>
<p>使用场景<br>对于多分支的代码库,将代码从一个分支转移到另一个分支是常见需求。<br>这时分两种情况.一种情况是,你需要另一个分支的所有代码变动，那么就采用合并（git merge）<br>另一种情况是,你只需要部分代码变动（某几个提交）</p>
</blockquote>
<h3 id="git-rebase-startpoint-endpoint-–onto-branchName"><a href="#git-rebase-startpoint-endpoint-–onto-branchName" class="headerlink" title="git rebase   [startpoint]   [endpoint]  –onto  [branchName]"></a>git rebase   [startpoint]   [endpoint]  –onto  [branchName]</h3><p>其中 [startpoint] [endpoint] 前开后闭，–onto的意思是要将指定的提交复制到哪个分支上。</p>
<p>当前的分支</p>
<pre class="mermaid">    graph LR
      3f85b32 -.-> 09c0472
      head -.-> 8e8e788
        subgraph oneb
          09c0472(09c0472 oneb -> oneb1) 
          c89a874(c89a874 oneb -> oneb1,2) 
          b29146b(b29146b oneb -> oneb1,2,3) 
          09c0472 --> c89a874 --> b29146b
        end
        subgraph master
          3f85b32(3f85b32 master -> main1) 
          8e8e788(8e8e788 master -> main1,2) 
          3f85b32 --> 8e8e788 
        end</pre>
<p><strong>git  rebase  c89a874^   b29146b  –onto  master</strong><br><strong>复制 oneb 分支的 <strong>c89a874</strong> , <strong>b29146b</strong> 到 master 变成 <strong>e5e3dce</strong> , <strong>340dd3c</strong></strong></p>
<pre class="mermaid">  graph LR
    3f85b32 -.-> 09c0472
    head -.-> 340dd3c
      subgraph oneb
        09c0472(09c0472 oneb->oneb1) 
        c89a874(c89a874 oneb->oneb1,2) 
        b29146b(b29146b oneb->oneb1,2,3) 
        09c0472-->c89a874-->b29146b
    end
    subgraph master
      3f85b32(3f85b32 master -> main1) 
      8e8e788(8e8e788 master -> main1,2) 
      e5e3dce(e5e3dce master -> oneb1,2 rebase)
      340dd3c(340dd3c master -> oneb1,2,3 rebase)
      3f85b32 --> 8e8e788  
      8e8e788 --> e5e3dce 
      e5e3dce --> 340dd3c
    end</pre>
<p>执行命令前的分支情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git  <span class="built_in">log</span>  --all  --graph  --oneline</span><br><span class="line">* 8e8e788 (HEAD -&gt; master) master  main1,2</span><br><span class="line">| * b29146b (oneb) oneb1,2,3</span><br><span class="line">| * c89a874 oneb1,2</span><br><span class="line">| * 09c0472 oneb1</span><br><span class="line">|/</span><br><span class="line">* 3f85b32 master main1</span><br></pre></td></tr></table></figure>

<p>在 master 分支执行,把 c89a874 到 b29146b 俩个commit 复制到 master 分支,提示有冲突</p>
<blockquote>
<p>c89a874^ 因为是开闭区间,为了包含 c89a874, 使用了 c89a874^</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ git  rebase  c89a874^   b29146b  --onto  master</span><br><span class="line">error: could not apply c89a874... oneb1,2</span><br><span class="line">Resolve all conflicts manually, mark them as resolved with</span><br><span class="line"><span class="string">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span>, <span class="keyword">then</span> run <span class="string">&quot;git rebase --continue&quot;</span>.</span><br><span class="line">You can instead skip this commit: run <span class="string">&quot;git rebase --skip&quot;</span>.</span><br><span class="line">To abort and get back to the state before <span class="string">&quot;git rebase&quot;</span>, run <span class="string">&quot;git rebase --abort&quot;</span>.</span><br><span class="line">Could not apply c89a874... oneb1,2</span><br><span class="line">Auto-merging a.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> a.txt</span><br><span class="line"></span><br><span class="line">$ git  diff</span><br><span class="line">diff --cc a.txt</span><br><span class="line">index 83e65d7,d13059c..0000000</span><br><span class="line">--- a/a.txt</span><br><span class="line">+++ b/a.txt</span><br><span class="line">@@@ -1,2 -1,2 +1,7 @@@</span><br><span class="line">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="string">HEAD</span></span><br><span class="line"><span class="string">+main1</span></span><br><span class="line"><span class="string">+main2</span></span><br><span class="line"><span class="string">++=======</span></span><br><span class="line"><span class="string">+ oneb1</span></span><br><span class="line"><span class="string">+ oneb2</span></span><br><span class="line"><span class="string">++&gt;&gt;&gt;&gt;&gt;&gt;&gt; c89a874 (oneb1,2)</span></span><br></pre></td></tr></table></figure>

<p>冲突修改 a.txt 文件为</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span>  a.txt</span><br><span class="line">one1</span><br><span class="line">one2</span><br><span class="line"><span class="comment"># 执行 git add 添加修改，继续执行生成分离节点 e5e3dce</span></span><br><span class="line"><span class="comment"># 提示还有第二个冲突</span></span><br><span class="line">$ git  add .</span><br><span class="line">$ git  rebase  --<span class="built_in">continue</span></span><br><span class="line">[detached HEAD e5e3dce] oneb1,2 rebase first</span><br><span class="line">1 file changed, 2 insertions(+), 2 deletions(-)</span><br><span class="line">Successfully rebased and updated detached HEAD.</span><br></pre></td></tr></table></figure>

<p>执行完上面步骤后的分支图<br>head 指向 340dd3c,但是 master 还是停留在原来的 8e8e788,需要把 master 指向 head</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>  --all  --oneline  --graph</span><br><span class="line">* 340dd3c (HEAD) oneb1,2,3</span><br><span class="line">* e5e3dce oneb1,2 rebase first</span><br><span class="line">* 8e8e788 (master) master  main1,2</span><br><span class="line">| * b29146b (oneb) oneb1,2,3</span><br><span class="line">| * c89a874 oneb1,2</span><br><span class="line">| * 09c0472 oneb1</span><br><span class="line">|/</span><br><span class="line">* 3f85b32 master main1   </span><br><span class="line"></span><br><span class="line"><span class="comment"># 把master 指向 340dd3c</span></span><br><span class="line">$ git  checkout master</span><br><span class="line">$  git  reset  --hard 340dd3c</span><br><span class="line">HEAD is now at 340dd3c oneb1,2,3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 现在的分支图</span></span><br><span class="line">$ git <span class="built_in">log</span>  --all  --oneline  --graph</span><br><span class="line">* 340dd3c (HEAD -&gt; master) oneb1,2,3</span><br><span class="line">* e5e3dce oneb1,2 rebase first</span><br><span class="line">* 8e8e788 master  main1,2</span><br><span class="line">| * b29146b (oneb) oneb1,2,3</span><br><span class="line">| * c89a874 oneb1,2</span><br><span class="line">| * 09c0472 oneb1</span><br><span class="line">|/</span><br><span class="line">* 3f85b32 master main1</span><br></pre></td></tr></table></figure>

<h3 id="通过-git-cherry-pick"><a href="#通过-git-cherry-pick" class="headerlink" title="通过 git cherry-pick"></a>通过 git cherry-pick</h3><p><strong>操作上和 git rebase 类似</strong></p>
<p>git cherry-pick命令的常用配置项如下</p>
<ul>
<li>-e,–edit<br>打开外部编辑器，编辑提交信息</li>
<li>-n,–no-commit<br>只更新工作区和暂存区，不产生新的提交。</li>
<li>-x<br>在提交信息的末尾追加一行(cherry picked from commit …)，方便以后查到这个提交是如何产生的。</li>
<li>-s ,–signoff<br>在提交信息的末尾追加一行操作者的签名，表示是谁进行了这个操作。</li>
</ul>
<p>提取一个 commit 到当前分支,会在当前分支产生1个新的 commit</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick commId</span><br></pre></td></tr></table></figure>

<p>提取 多个 commit 到当前分支,会在当前分支产生2个新的 commit</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick commitIdA commitIdB</span><br></pre></td></tr></table></figure>

<p>剪提取指定的开闭范围的 commit 到当前分支,会在当前分支产生多个新的 commit</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick commitIdA..commitIdC</span><br></pre></td></tr></table></figure>

<h3 id="分支切割机-git-rebase-–onto-master-next-topic"><a href="#分支切割机-git-rebase-–onto-master-next-topic" class="headerlink" title="分支切割机 git rebase –onto master next topic"></a>分支切割机 git rebase –onto master next topic</h3><p>master 分支上创建了 next 分支<br>next 分支的基础上创建了 topic 分支</p>
<p>意思就是 在master之上 把从next分支切出的topic分支 移动到master 分支</p>
<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><h2 id="设置或修改全局-用户名或邮箱"><a href="#设置或修改全局-用户名或邮箱" class="headerlink" title="设置或修改全局 用户名或邮箱"></a>设置或修改全局 用户名或邮箱</h2><p>设置的用户是用来追踪代码的提交修改操作的和 GitHub 上配置账号邮箱密码没有关系</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;username&quot;</span></span><br><span class="line">$ git config --global user.email <span class="string">&quot;email&quot;</span></span><br></pre></td></tr></table></figure>


<h2 id="查看-用户名或邮箱"><a href="#查看-用户名或邮箱" class="headerlink" title="查看 用户名或邮箱"></a>查看 用户名或邮箱</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> $ git config user.name`</span><br><span class="line">`$ git config user.email</span><br></pre></td></tr></table></figure>


<h2 id="生成密钥-用来和远程仓库-ssh-通讯加密"><a href="#生成密钥-用来和远程仓库-ssh-通讯加密" class="headerlink" title="生成密钥 用来和远程仓库 ssh 通讯加密"></a>生成密钥 用来和远程仓库 ssh 通讯加密</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;全局标记&quot;</span></span><br></pre></td></tr></table></figure>

<p> <em>全局标记</em> 只是作为唯一标记,可以随便起名<br> 密钥保存在当前用户的 .ssh  文件夹下</p>
<p>生成过程中需要的密码用途是用来保护生成的公钥，可以不输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh </span><br><span class="line"><span class="comment"># id_rsa 私钥  d_rsa.pub 是公钥 </span></span><br><span class="line">$ <span class="built_in">ls</span> </span><br><span class="line">id_rsa <span class="built_in">cat</span> id_rsa.pub</span><br><span class="line">$ <span class="built_in">cat</span> id_rsa.pub</span><br><span class="line"><span class="comment"># 出现的内容就是 公钥 </span></span><br></pre></td></tr></table></figure>

<p>把公钥的内容复制到github  ssh key,用以下命令测试和 github s是否链接成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T  git@github.com</span><br><span class="line">Hi man-someone! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure>

<h2 id="配置多个公钥-比如在Gitee-开通俩个账号-就必须要有俩个公钥"><a href="#配置多个公钥-比如在Gitee-开通俩个账号-就必须要有俩个公钥" class="headerlink" title="配置多个公钥,比如在Gitee 开通俩个账号,就必须要有俩个公钥"></a>配置多个公钥,比如在Gitee 开通俩个账号,就必须要有俩个公钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bhs_rsa 生成钥匙的文件名</span></span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;xxx@gmail.com&quot;</span> -f ~/.ssh/bhs_rsa</span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">bhs_rsa  bhs_rsa.pub  id_rsa  id_rsa.pub  known_hosts  known_hosts.old</span><br></pre></td></tr></table></figure>

<p><strong>多个公钥,在gitee 和 github 分别配置好,还需要在本地配置</strong><br>在.ssh 目录下的文件 config 配置如下</p>
<ul>
<li>Host 用来区分同一网站 gitee 不同账号设置的 ssh </li>
<li>HostName 网站的根路径</li>
<li>IdentityFile 本地公钥的文件名</li>
<li>User 用户名</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># someone private  github</span></span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">User someone</span><br><span class="line"></span><br><span class="line"><span class="comment"># someone private gitee</span></span><br><span class="line">Host gitee.com</span><br><span class="line">HostName gitee.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">User someone</span><br><span class="line"></span><br><span class="line"><span class="comment"># company bhs  gitee</span></span><br><span class="line">Host bhs.gitee.com</span><br><span class="line">HostName gitee.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/bhs_rsa</span><br><span class="line">User someone </span><br></pre></td></tr></table></figure>

<p>现在有三个远程 remote </p>
<ul>
<li>github.com </li>
<li>gitee.com </li>
<li>bhs.gitee.com</li>
</ul>
<p>假如三个远程 remote 都有一个空仓库 gitDemo,本地也有 gitDemo 仓库,现在要把本地的分支 master 推送到远程<br>需要和三个远程分别建立绑定关系<br>githubOrigin,giteeOrigin,bhsOrigin 是远程仓库的别名 方便后面的提交等操作<br>git@后面要紧跟配置.ssh config 配置文件里配置的 Host </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git  remote  add  githubOrigin  git@github.com:man-someone/gitDemo.git</span><br><span class="line">$ git  remote  add  giteeOrigin   git@gitee.com:someone_repos/git-demo.git</span><br><span class="line">$ git  remote  add  bhsOrigin     git@bhs.gitee.com:BHS_SH_0/git-demo.git</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>分别向远程的空仓库进行第一次 master 提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push  githubOrigin master</span><br><span class="line">$ git push  giteeOrigin master</span><br><span class="line">$ git push  bhsOrigin master</span><br></pre></td></tr></table></figure>


<h2 id="本地库和远程库关联"><a href="#本地库和远程库关联" class="headerlink" title="本地库和远程库关联"></a>本地库和远程库关联</h2><p><strong>git 是无中心化的代码管理 remote 表示的是每一个参与者,如果有3个参与者那就是三个 remote</strong><br><strong>为了方便管理会把一个 remote 叫做 origin ,大家都和它进行同步,让它保持最新</strong><br><strong>这里叫成什么名字都可以,不一定是 origin ,origin 只是一种约定名字</strong></p>
<ol>
<li><p>把本地 remote 和远程的 GitHub 仓库进行关联,并给这个 远程的 url 起个别名 origin<br> <em><strong>git@ 后经跟.ssh config 里配置的 Host</strong></em></p>
<ul>
<li><p>git remote add</p>
<p> git remote add origin <a href="mailto:&#x67;&#x69;&#x74;&#64;&#x67;&#x69;&#x74;&#104;&#117;&#x62;&#x2e;&#x63;&#x6f;&#109;">&#x67;&#x69;&#x74;&#64;&#x67;&#x69;&#x74;&#104;&#117;&#x62;&#x2e;&#x63;&#x6f;&#109;</a>:man-someone/gitDemo.git</p>
<p>  显示所有的远程,因为本地的 remote 仓库就是自己 这里就没有显示</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地仓库关联的远程仓库</span></span><br><span class="line">$ git remote</span><br><span class="line">origin</span><br><span class="line">$ git remote -v</span><br><span class="line">origin  git@github.com:man-someone/gitDemo.git (fetch)</span><br><span class="line">origin  git@github.com:man-someone/gitDemo.git (push)</span><br></pre></td></tr></table></figure></li>
<li><p>git clone </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:man-someone/gitDemo.git</span><br><span class="line">$ git <span class="built_in">clone</span> git@bhs.gitee.com:BHS_SH_0/git-demo.git</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>删除本地仓库关联的远程仓库链接 git remote rm <remote_name><br><em><strong>一旦以这种方式删除了一个远程仓库，那么所有和这个远程仓库相关的远程跟踪  的文件<br>分支以及配置信息也会一被删除</strong></em></p>
<p>未合并的远程分支和未合并的 commit 也会一起删除</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote <span class="built_in">rm</span> origin</span><br></pre></td></tr></table></figure>

<p>在查不到任何远程分支的信息</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -r</span><br></pre></td></tr></table></figure></li>
<li><p>给关联的远程仓库更改名字 git remote  rename <old_remote_name> <new_remote_name></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rename origin origin_other </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="查看远程仓库情况"><a href="#查看远程仓库情况" class="headerlink" title="查看远程仓库情况"></a>查看远程仓库情况</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote  show origin</span><br></pre></td></tr></table></figure>

<h2 id="git-clone-远程拷贝到本地"><a href="#git-clone-远程拷贝到本地" class="headerlink" title="git clone 远程拷贝到本地"></a>git clone 远程拷贝到本地</h2> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认colon 是 master 分支</span></span><br><span class="line"><span class="comment">#默认绑定远程仓库名字是 origin</span></span><br><span class="line">$ git <span class="built_in">clone</span>  git@gitee.com:someone_repos/git-demo.git</span><br><span class="line"></span><br><span class="line"><span class="comment">#可以自定义远程名字是 myOrigin,通过 -o</span></span><br><span class="line">$ git  <span class="built_in">clone</span> -o myOrigin git@gitee.com:someone_repos/git-demo.git</span><br><span class="line"></span><br><span class="line"><span class="comment">#以下命令会把所有分支 clone下来,唯一就是自动切换到 oneb 分支,意义不大</span></span><br><span class="line">$ git  <span class="built_in">clone</span>  -b  oneb  git@gitee.com:someone_repos/git-demo.git</span><br></pre></td></tr></table></figure>

<p>  git clone <a href="mailto:&#x67;&#105;&#116;&#x40;&#x67;&#x69;&#116;&#101;&#101;&#46;&#99;&#x6f;&#109;">&#x67;&#105;&#116;&#x40;&#x67;&#x69;&#116;&#101;&#101;&#46;&#99;&#x6f;&#109;</a>:someone_repos/git-demo.git<br>  执行后默认在本地创建了本地 master 分支和远程 origin/master建立绑定关系,远程的其他分支并没有进行绑定关系,执行 git branch  oneb 就会在本地生成一个 oneb 分支对应远程的 origin/oneb 分支</p>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --all  --oneline  --graph</span><br><span class="line">* 7f91e01 (HEAD -&gt; master, origin/master, origin/HEAD) add a.txt main1</span><br><span class="line">| * 25bc85b (origin/twob) add two.txt twob1</span><br><span class="line">|/</span><br><span class="line">| * 985951a (origin/oneb) add one.txt oneb1</span><br><span class="line">|/</span><br><span class="line">* c178a02 Initial commit</span><br><span class="line"></span><br><span class="line"><span class="comment">#远程分支</span></span><br><span class="line">$ git  branch  -r</span><br><span class="line">origin/HEAD -&gt; origin/master</span><br><span class="line">origin/master</span><br><span class="line">origin/oneb</span><br><span class="line">origin/twob</span><br><span class="line"></span><br><span class="line"><span class="comment">#本地分支</span></span><br><span class="line">$ git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>
<h3 id="只-clone-指定的分支-git-clone-b-oneb-–single-branch"><a href="#只-clone-指定的分支-git-clone-b-oneb-–single-branch" class="headerlink" title="只 clone 指定的分支 git  clone  -b  oneb  –single-branch"></a>只 clone 指定的分支 git  clone  -b  oneb  –single-branch</h3> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#增加参数 single-branch,就只 clone oneb 一个分支</span></span><br><span class="line">$ git  <span class="built_in">clone</span>  -b  oneb  --single-branch  git@gitee.com:someone_repos/git-demo.git</span><br></pre></td></tr></table></figure>
<h3 id="克隆到指定的目录"><a href="#克隆到指定的目录" class="headerlink" title="克隆到指定的目录"></a>克隆到指定的目录</h3> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git  <span class="built_in">clone</span>   git@gitee.com:someone_repos/git-demo.git dirName</span><br></pre></td></tr></table></figure>

<h2 id="push-推送分支的内容到远程仓库"><a href="#push-推送分支的内容到远程仓库" class="headerlink" title="push 推送分支的内容到远程仓库"></a>push 推送分支的内容到远程仓库</h2><p><strong>命令格式:git push remoteName localBranchName:remoteBranchName</strong></p>
<blockquote>
<p>如果 push 的远程分支 remoteBranchName 不存在运程仓库会新建 remoteBranchName 分支<br>如果省略 remoteBranchName 分支名<br>git push  remoteName localBranchName 除非绑定了远程和本地的分支,否则推送到同名的远程分支</p>
</blockquote>
<p><em><strong>此分支会覆盖远程仓库的分支代码</strong></em>,可以一次推送多个分支上去<br>推送成功的前提是要推送的本地分支拥有远程分支最新的提交,如果没有是不让推送的,因为有冲突的话<br>远程是个服务器,它不会合并代码</p>
<p>这种情况要先fetch 或 pull 拉取远程最新的代码到本地合并冲突提交后在推送本地的更新<br>本地的更新要考虑远程的更新</p>
<h3 id="推送指定的本地分支到远程"><a href="#推送指定的本地分支到远程" class="headerlink" title="推送指定的本地分支到远程"></a>推送指定的本地分支到远程</h3><p>推送本地分支 oneb 到同名的远程分支,远程不存在 oneb 分支就新建一个<br>也可以同时推送多个本地分支,用逗号隔开</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push o  oneb</span><br></pre></td></tr></table></figure>

<p>推送本地分支 oneb 到不同命的的远程分支 remoteBranName  ,远程不存在 remoteBranName 分支就新建一个 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git push o  oneb:remoteBranName</span><br><span class="line"> </span><br><span class="line"><span class="comment"># push 同时建立绑定关系</span></span><br><span class="line">$ git push o -u oneb:remoteBranName</span><br><span class="line"><span class="comment"># 建立绑定关系以后就可以省略 remoteBranName</span></span><br><span class="line">$ git push o oneb</span><br></pre></td></tr></table></figure>

<h3 id="pull-所有分支"><a href="#pull-所有分支" class="headerlink" title="pull 所有分支"></a>pull 所有分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git   push o  --all</span><br></pre></td></tr></table></figure>


<h3 id="删除远程分支-1"><a href="#删除远程分支-1" class="headerlink" title="删除远程分支"></a>删除远程分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin -d remotebranchName</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git push origin :remotebranchName</span><br></pre></td></tr></table></figure>

<h3 id="push-tags"><a href="#push-tags" class="headerlink" title="push tags"></a>push tags</h3><p>把本地的所有 tags 传递到远程仓库<br><strong>git push  origin master 不会把 tag 推送上去 tag 要单独推送</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br></pre></td></tr></table></figure>

<h3 id="push-–force"><a href="#push-–force" class="headerlink" title="push –force"></a>push –force</h3><p>push 在远程是 fast-forward 合并 如果不能执行说明有冲突</p>
<p><strong>git push <remote> –force</strong><br>当对于<remote>来说不是一个fast-forward的merge时, Git通过拒绝push来防止覆盖中央仓储的历史.因此当远程历史和你的历史有分叉的时候, 你需要先pull, 然后再尝试push. </p>
<p>–force标识会忽略fast-forward merge这个前提, 通过删除上游的修改(你最后一次pull的修改)来使得远程仓储分支和你本地的匹配</p>
<h2 id="git-fetch-获取远程仓库相对于本地仓库的更新或获取远程仓库新的分支-不会合并"><a href="#git-fetch-获取远程仓库相对于本地仓库的更新或获取远程仓库新的分支-不会合并" class="headerlink" title="git fetch  获取远程仓库相对于本地仓库的更新或获取远程仓库新的分支,不会合并"></a>git fetch  获取远程仓库相对于本地仓库的更新或获取远程仓库新的分支,不会合并</h2><p><strong>命令格式: git fetch remoteName remoteBranchName</strong></p>
<blockquote>
<p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到git fetch命令<br>fetch 到的内容是只读的,不能更新,要采用,只能合并或变基<br>即使进入 fetch 下来的分支进行了内容更新,退出 fetch 下来的分支,更新的内容仍然会丢失</p>
</blockquote>
<h3 id="获取更新或获取本地不存在的分支"><a href="#获取更新或获取本地不存在的分支" class="headerlink" title="获取更新或获取本地不存在的分支"></a>获取更新或获取本地不存在的分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先查看远程仓库的分支情况</span></span><br><span class="line">$ git remote show  origin </span><br><span class="line"></span><br><span class="line"><span class="comment"># fetch 单独的分支</span></span><br><span class="line"><span class="comment"># 可以指定多个分支,用逗号隔开</span></span><br><span class="line">$ git fetch origin remoteName</span><br><span class="line"><span class="comment"># fetch 所有分支</span></span><br><span class="line">$ git fetch origin</span><br></pre></td></tr></table></figure>

<h3 id="查看远程更新的内容"><a href="#查看远程更新的内容" class="headerlink" title="查看远程更新的内容"></a>查看远程更新的内容</h3><ol>
<li>git checkout  o/master 进入分支查看文件</li>
<li>git cat-file -p commitId 先进入 commit 对象,在进入tree 对象,在进入 block 对象</li>
<li>git log  -p  fetch_head 或 git show  fetch_head<br>也可以查看上一个 commit , git show  fetch_head^</li>
<li>git diff  master origin/master 通过比对差异,查看内容</li>
</ol>
<h3 id="获取远程更新后的俩种处理办法"><a href="#获取远程更新后的俩种处理办法" class="headerlink" title="获取远程更新后的俩种处理办法"></a>获取远程更新后的俩种处理办法</h3><ol>
<li>合并或变基<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git merge origin/master</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git rebase origin/master</span><br></pre></td></tr></table></figure></li>
<li>在远程分支的基础上创建新的本地分支<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git  branch localBranchName o/remoteBranName</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="远程删除了分支-但是本地还保留与远程的分支的引用可以使用如下命令更新本地的远程分支引用"><a href="#远程删除了分支-但是本地还保留与远程的分支的引用可以使用如下命令更新本地的远程分支引用" class="headerlink" title="远程删除了分支,但是本地还保留与远程的分支的引用可以使用如下命令更新本地的远程分支引用"></a>远程删除了分支,但是本地还保留与远程的分支的引用可以使用如下命令更新本地的远程分支引用</h3>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># p  prune</span></span><br><span class="line">$ git fetch o -p</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git remote prune origin</span><br></pre></td></tr></table></figure>

<h2 id="git-pull-合并本地和远程的分支"><a href="#git-pull-合并本地和远程的分支" class="headerlink" title="git pull 合并本地和远程的分支"></a>git pull 合并本地和远程的分支</h2><p><strong>命令的格式是:git pull remoteName  remoteBranchName:localBranchName</strong></p>
<blockquote>
<p>git pull命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并</p>
</blockquote>
<h3 id="git-pull-指定的远程分支合并到当前分支"><a href="#git-pull-指定的远程分支合并到当前分支" class="headerlink" title="git pull 指定的远程分支合并到当前分支"></a>git pull 指定的远程分支合并到当前分支</h3><p>拉取 remoteBranName 分支和当前的本地分支 oneb 合并</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b  oneb</span><br><span class="line">$ git  pull  origin  remoteBranName</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git  pull  origin  remoteBranName:</span><br></pre></td></tr></table></figure>

<h3 id="git-pull-指定的远程分支合并到指定的本地分支分支"><a href="#git-pull-指定的远程分支合并到指定的本地分支分支" class="headerlink" title="git pull 指定的远程分支合并到指定的本地分支分支"></a>git pull 指定的远程分支合并到指定的本地分支分支</h3><p>拉去远程分支 remoteBranName 到本地 oneb 分支,如果 本地不存在<br>oneb 分支,就新建一个,如何存在就和本地的 oneb 分支合并</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git pull origin remoteBranName:oneb</span><br></pre></td></tr></table></figure>

<h3 id="git-pull-所有分支合并到本地"><a href="#git-pull-所有分支合并到本地" class="headerlink" title="git pull 所有分支合并到本地"></a>git pull 所有分支合并到本地</h3><p>本地不存在对应的分支就新建同名本地分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin</span><br></pre></td></tr></table></figure>

<h3 id="git-pull-rebase-代替合并"><a href="#git-pull-rebase-代替合并" class="headerlink" title="git pull rebase 代替合并"></a>git pull rebase 代替合并</h3><p> <strong>pull 等同于 fetch 和 merge 俩个命令一起执行</strong></p>
<p> pull 的时候也可以不用默认的 merge 用 rebase,用法同上</p>
<p> 在本地新建 twob 分支 twob, pull 远程分支 oneb 作为本地分支 twob 的 rebase 基<br> twob 有原来的基 master 变为 o/oneb<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git  checkout -b  twob</span><br><span class="line">$ git pull --rebase origin  oneb</span><br></pre></td></tr></table></figure></p>
<h2 id="获取-git-ls-remote-显示远程的分支及最新的commit"><a href="#获取-git-ls-remote-显示远程的分支及最新的commit" class="headerlink" title="获取 git ls-remote   显示远程的分支及最新的commit"></a>获取 git ls-remote <remote>  显示远程的分支及最新的commit</h2><p> 可以和 git  remote show  origin 进行比对查看<br> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">  $ </span><span class="language-bash">git  ls-remote origin</span> </span><br><span class="line">  7f9a44dc803916d42383ee2f0cfa698cffdce04f        HEAD</span><br><span class="line">  7f9a44dc803916d42383ee2f0cfa698cffdce04f        refs/heads/master</span><br><span class="line">  12c9d606b92c21f2da17c4fee12ca0a1c61d0dc0        refs/heads/oneb</span><br><span class="line">  0276c09d5ea5fddebdaea857ab627a04190bc08e        refs/tags/v1.0</span><br><span class="line">  e5bb54594c94f23392e528ea8c8e4be8ec416df0        refs/tags/v1.0^&#123;&#125;</span><br><span class="line"></span><br><span class="line">```  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">git 2.23 版本新增加的命令</span></span><br><span class="line"> git 2.23 版本新增了switch、restore命令，因为git checkout 命令职责较多、不够明确，而switch命令则专门用来切换分支、创建并切换分支等</span><br><span class="line"> switch</span><br><span class="line"> ```shell</span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">创建分支</span></span><br><span class="line"><span class="meta prompt_">  $ </span><span class="language-bash">git switch branchName</span></span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">在某个commit 或 tag 处创建分支</span></span><br><span class="line"><span class="meta prompt_">  $ </span><span class="language-bash">git switch branchName commitID</span> </span><br><span class="line"><span class="meta prompt_">  $ </span><span class="language-bash">git switch branchName tagId</span> </span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">创建分支并跳转到相应的分支</span></span><br><span class="line"><span class="meta prompt_">  $ </span><span class="language-bash">git switch -c branchName</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p> restore</p>
<p> git restore –staged <file_name> 将暂存区的修改重新放回工作区（包括对文件自身的操作，如添加文件、删除文件）<br> git restore <file_name> 用commit 恢复暂存区的修改（包括对文件自身的操作，如添加文件、删除文件),工作区不受影响</p>
<h1 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h1><p>   <em><strong>.gitignore 文件要在仓库一开始就进行提交,因为已经被跟踪的文件,即使在 .gitignore 里进行了配置 不进行跟踪,已经跟踪的文件不会受 .gitignore 配置的影响,只有新文件才会受影响<br>   作为补救措施,可以执行 git rm –cached fileName 在暂存区和本地库移除此文件,但是工作区保留此<br>   文件.</strong></em></p>
<h2 id="配置规则"><a href="#配置规则" class="headerlink" title="配置规则"></a>配置规则</h2><p>   git 对于 .ignore 配置文件是按行从上到下进行规则匹配的,意味着如果前的规则匹配的范围更大<br>   则后面的规则将不会生效</p>
<p>   配置规则:<br>    * 以斜杠“/”开头表示目录<br>    * 以星号“*”通配多个字符<br>    * 以问号“?”通配单个字符<br>    * 以方括号“[]”包含单个字符的匹配列表<br>    * 以叹号“!”表示不忽略(跟踪)匹配到的文件或目录</p>
<p>   示例说明</p>
<ol>
<li><p>以 .out 作为后缀的文件全部忽略<br>*.out</p>
</li>
<li><p>以 .out 作为后缀并且以字母 a 开头的文件全部忽略<br>a*.txt</p>
</li>
<li><p>以 .out 作为后缀并且以字母 a 开头并且以字母b 结尾的文件全部忽略<br>a*b.txt</p>
</li>
<li><p>根目录下的 newDir 目录下的所有文件忽略<br>/newDir/*  </p>
</li>
<li><p>目录 bar 下的所有文件忽略,不论 bar 在那个目录下面<br>bar/* </p>
</li>
<li><p>不忽略 bar 目录下的 bar.txt文件<br>!bar/bar.txt  </p>
</li>
</ol>
<h2 id="特别处理"><a href="#特别处理" class="headerlink" title="特别处理"></a>特别处理</h2><ul>
<li>被或略的文件如果非要加入版本管理可以执行 git  add -f  fileName</li>
<li>可以用 git-check-ignore -v  fileName 检查文件是被那条规则过滤的<br> 如下是被第一条规则过滤的 <figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> $ git<span class="built_in"> check-ignore </span>-v a1.txt</span><br><span class="line"><span class="keyword">.gitignore</span>:1:a*.txt    a1.txt</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="git-hook"><a href="#git-hook" class="headerlink" title="git hook"></a>git hook</h1><p>git 能在特定的重要动作发生时触发自定义脚本.有两组这样的钩子:客户端的和服务器端的.  </p>
<ul>
<li>客户端钩子由诸如提交和合并这样的操作所调用 </li>
<li>服务器端钩子作用于诸如接收被推送的提交这样的联网操作</li>
</ul>
<blockquote>
<p>钩子都被存储在 Git 目录下的 hooks 子目录中. .git/hooks，默认存在的都是示例，其名字都是以 .sample 结尾,<br>如果你想启用它们,得先移除这个后缀。把一个正确命名且可执行的文件放入 Git 目录下的 hooks 子目录中,即可激活<br>该钩子脚本.这样一来,它就能被 Git 调用.<br>git hook 使用 linux shell 脚本编写</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90">git hook 官方文档</a></p>
<h1 id="git-裸仓库"><a href="#git-裸仓库" class="headerlink" title="git 裸仓库"></a>git 裸仓库</h1><p>初始化裸仓库,是没有工作区的,只能查看git 提交的历史信息,不能做其他操作,如果要增加 commit 及分支要<br>以此裸仓库为基础的 clone 一个普通仓库,普通仓库向裸仓库进行 push , pull , fetch 等操作,或其他普通<br>仓库进行关联后(git remote origin 裸仓库的路径),也可以向此裸仓库进行 push , pull , fetch 等操作 </p>
<p><strong>裸仓库就象 gitHub 中托管的仓库一样裸仓库默认用 .git 结尾</strong></p>
<p><strong>裸仓库可以向其他仓库进行 push , fetch 操作,只要不涉及工作区的操作,裸仓库都可做</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git init --bare  test.git</span><br><span class="line"><span class="comment"># test.git 的根目录下,查看本仓库的配置</span></span><br><span class="line"><span class="comment"># bare = true 标记这是一个裸仓库</span></span><br><span class="line">$ <span class="built_in">cat</span> config</span><br><span class="line">[core]</span><br><span class="line">    repositoryformatversion = 0</span><br><span class="line">    filemode = <span class="literal">false</span></span><br><span class="line">    bare = <span class="literal">true</span></span><br><span class="line">    symlinks = <span class="literal">false</span></span><br><span class="line">    ignorecase = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="把一个普通仓库变成裸仓库"><a href="#把一个普通仓库变成裸仓库" class="headerlink" title="把一个普通仓库变成裸仓库"></a>把一个普通仓库变成裸仓库</h2><p> <strong>把普通仓库的.git 目录当成裸仓库,原来仓库的工作区全部丢掉,并修改配置</strong><br> <strong>git config –bool core.bare true</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> repo</span><br><span class="line">$ <span class="built_in">mv</span> .git ../repo.git </span><br><span class="line">$ <span class="built_in">cd</span> ..</span><br><span class="line">$ <span class="built_in">rm</span> -fr repo</span><br><span class="line">$ <span class="built_in">cd</span> repo.git</span><br><span class="line">$ git config --bool core.bare <span class="literal">true</span></span><br></pre></td></tr></table></figure>






<h1 id="git-开发流程"><a href="#git-开发流程" class="headerlink" title="git 开发流程"></a>git 开发流程</h1><p>当在团队开发中使用版本控制系统时, 商定一个统一的工作流程是至关重要的. Git 的确可以在各个方面做很多事情, 然而, 如果在你的<br>团队中还没有能形成一个特定有效的工作流程, 那么混乱就将是不可避免的.</p>
<p>开发流程都采用”功能驱动式开发”(Feature-driven development，简称FDD)<br>它指的是，需求是开发的起点, 先有需求再有功能分支(feature branch)或者补丁分支(hotfix branch) 完成开发后, 该分支就合并到主<br>分支,然后被删除.</p>
<p>Git flow的优点是清晰可控,缺点是相对复杂.需要同时维护两个长期分支. 大多数工具都将master当作默认分支,可是开发是在develop分支<br>进行的,这导致经常要切换分支,非常烦人。<br>更大问题在于,这个模式是基于”版本发布”的, 目标是一段时间以后产出一个新版本(develop 推进到一定程度后). 但是, 很多网站项目是”持<br>续发布”, 代码一有变动,就部署一次. 这时 master 分支和 develop 分支的差别不大, 没必要维护两个长期分支.</p>
<p>SIT(System Integration Testing)系统集成测试<br>UAT(User Acceptance Test)用户验收测试</p>
<h2 id="git-flow-版本发布"><a href="#git-flow-版本发布" class="headerlink" title="git flow (版本发布)"></a>git flow (版本发布)</h2><p><strong>master</strong><br>生产环境,主分支.这个分支包含最近发布到生产环境的代码，最近发布的 release ,这个分支只能从其他分支合并,不能在这个分支直接修改‌<br>用于 uat 发布或最终发布.绝不可直接 push. 所有在 master分支上的 commit 应该 tag,此分支一直保留在仓库内.</p>
<p><strong>develop</strong><br>测试环境,主开发分支.基于 master 分支克隆,只能从其它分支合并, 比如 feature 分支.绝不可直接 push. 包含所有要发布到下一个<br>release  的代码,此分支一直保留在仓库内.不断的合并其他 feature 分支,在此分支基础上临时开 release 分支去做测试,release 测<br>试后在合并回 master 和 develop. 此分支一直保留在仓库内.</p>
<p>我们尽量不要在 develop 分支上写代码,要保证 develop 分支的相对稳定,所以这时我要就要基于develop 分支创建一个临时的开发分支,<br>然后在开发分支上编写代码,等功能开发完之后我们再把开发分支合并到develop上</p>
<p><strong>feature</strong><br>功能开发分支,基于 develop 分支克隆.用于新功能新需求的开发,合并到 develop 分支进入下一个release‌ ,临时分支,合并后可以删除.</p>
<p><strong>release</strong><br>预上线分支,测试(sit环境)分支.当你需要发布一个新功能的时候,要基于 develop 分支创建一个 release分支,在 release 分支测试并修<br>复bug,完成 release 后,把 release 合并到 master 和 develop 分支‌,在master分支上打标签用于发布, 临时分支,合并后可以删除.</p>
<p><strong>hotfix</strong><br>补丁分支,正式环境的版本进行 bug 修复当我们在生产环境发现新的 bug 时候,我们需要基于 master分支创建一个 hotfix 分支,然后在<br>hotfix 分支上修复 bug ,完成 hotfix 后,我们要把 hotfix 分支合并回 master 和 develop 分支‌. 在master分支上打标签用于发布.<br>临时分支,合并后可以删除.</p>
<p><a target="_blank" rel="noopener" href="https://nvie.com/posts/a-successful-git-branching-model/">https://nvie.com/posts/a-successful-git-branching-model/</a></p>
<p><img src="/2022/05/29/git/git/git-flow.jpg" alt="git-flog"></p>
<h2 id="github-flow-持续发布"><a href="#github-flow-持续发布" class="headerlink" title="github flow(持续发布)"></a>github flow(持续发布)</h2><p>github flow 是 git flow 的简化版, 专门配合”持续发布”, 它是 Github.com 使用的工作流程.<br>它只有一个长期分支,就是master，因此用起来非常简单</p>
<p>github 项目如果不是自己的发布的, clone 别人的项目是无法直接 push 上去的,只能 fetch,pull.<br>如果想参与进来可以提 issue  或 提 pr</p>
<p>如果在 github 上建立一个组织,可以把别人加入组织,在组织内的成员都可以 push 代码<br>或者把别人拉到项目里作为参与者</p>
<p>1.创建组织<br>2.创建项目主仓库<br>3.Clone 主仓库 内部项目<br>3.Fork 主仓库 和 Clone fork仓库 开源项目<br>4.添加上游地址<br>5.同步最新代码<br>6.创建功能分支 feat/2<br>7.提交代码合并分支<br>8.合并最新代码 (解决合并冲突)<br>9.推送代码<br>10.提交 Pull request<br>11.讨论审核代码<br>12.合并和部署<br>13.删除功能分子 feat/2</p>
<h2 id="gitlab-flow-版本发布-持续发布"><a href="#gitlab-flow-版本发布-持续发布" class="headerlink" title="gitlab flow (版本发布)(持续发布)"></a>gitlab flow (版本发布)(持续发布)</h2><p>gitlab flow 是 Git flow 与 Github flow 的综合.它吸取了两者的优点,既有适应不同开发环境的弹性,又有单一主分支的简单和便利.<br>它是 gitlab.com 推荐的做法.</p>
<h1 id="原理解释"><a href="#原理解释" class="headerlink" title="原理解释"></a>原理解释</h1><h2 id="git-目录"><a href="#git-目录" class="headerlink" title="git 目录"></a>git 目录</h2><p>Git 将目录分为三个区:</p>
<p>*工作目录 (working directory): 即目录中除了 .git 目录之外的所有文件, 也就是我们平时写代码的地方<br>*暂存区 (index or staging area): 就是平时 add 完文件之后改动暂存的地方, 在 .git/index 下. 这里<br> 的改动会在下一次 commit 的时候被加入到 repo 里<br>*Git 仓库 (Git Repository): 存放 git 的所有信息的地方, 也就是 .git 目录</p>
<p>暂存区 存在的意义直接代码提交本地仓库不更方便吗？</p>
<ol>
<li>Git中的Commit操作它是一个原子性操作（想一想你可以在git commit时去选择提交哪些吗？），也就是它会把暂存区的文件全部提交，<br>而且要么全部成功，要么全部失败；</li>
<li>那么你什么时候去选择要提交哪些文件呢？Commit操作是将暂存区的内容全部提交，所以我们要回到暂存区中思考,从工作区到暂存区，<br>使用Git Add 文件名，我们可以选择性地向暂存区添加内容，然后将其分批提交，暂存区的意义是它将你准备提交的内容分批整体处理；<br><em>例如:有在有紧急 bug 这个时候只要把有紧急 bug 相关的文件提交</em></li>
</ol>
<p> <strong>git where 查看 git 安装路径</strong><br> <strong>winds 系统需要下载 tree.exe 文件到 git 安装目录的 usr 目录的 bin 目录里增加 tree 命令</strong><br> <strong>tree -L 1 .git 查看 .git 下的目录 tree ,-L 1 指定层级为1 -L 2 指定层级为2</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ tree -L 1 .git</span><br><span class="line">.git</span><br><span class="line">|-- COMMIT_EDITMSG <span class="comment"># 最近 Commit 时打的 Commit Message. 提供这个文件主要是为了与各种 editor 交互</span></span><br><span class="line">|-- HEAD           <span class="comment"># 当前 </span></span><br><span class="line">|-- config         <span class="comment"># INI格式的配置文件</span></span><br><span class="line">|-- description    <span class="comment">#仓库描述文件</span></span><br><span class="line">|-- hooks    </span><br><span class="line">|-- index          <span class="comment"># 暂存区文件</span></span><br><span class="line">|-- info</span><br><span class="line">|-- logs           <span class="comment"># 日志</span></span><br><span class="line">|-- objects        <span class="comment"># 对象数据库 存放代码改动</span></span><br><span class="line">|-- refs           <span class="comment"># 引用</span></span><br></pre></td></tr></table></figure>

<h2 id="查看-objects-目录-保存的到底是什么"><a href="#查看-objects-目录-保存的到底是什么" class="headerlink" title="查看 objects 目录 保存的到底是什么"></a>查看 objects 目录 保存的到底是什么</h2><p>通过 cat 文件是乱码，被压缩成为二进制信息了,要通过 git cat-file [-t] [-p]， -t可以查看object的类型，<br> -p可以查看object储存的具体内容,</p>
<h3 id="数据对象-blob-二进制大对象"><a href="#数据对象-blob-二进制大对象" class="headerlink" title="数据对象(blob)二进制大对象"></a>数据对象(blob)二进制大对象</h3><p>数据对象的产生是在使用git add命令将文件或者目录加入到暂存区时产生的，Git会把一个文件中要存储的数据和一个头部信息<br>一起做SHA-1散列运算，将得到的散列值作为这个文件的路径，散列值前两字符用于命名子目录，余下的38个字符则用作文件名</p>
<p>下面我们将通过具体过程来进行展示和分析。把 a.txt加入暂存区<br><strong>修改三次文件每次修改完第1次内容为1 第二次为 1 2 第3次 1 2 3，通过 add 添加到 暂存区</strong></p>
<p>objects 目录下生成三个文件代表三次提交,和文件名没有关系只是表示的是每次 add 的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> 或 $ ll</span><br><span class="line">a.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ tree .git/objects</span><br><span class="line">.git/objects</span><br><span class="line">|-- 56</span><br><span class="line">|   `-- a6051ca2b02b04ef92d5150c9ef600403cb1de</span><br><span class="line">|-- 5f</span><br><span class="line">|   `-- 5fbe759f10b9807b18f3898afd7505dbbfcbd2</span><br><span class="line">|-- 7a</span><br><span class="line">|   `-- 754f414cd8ac6c069ac2e25baff0f55bff8b4a</span><br><span class="line">|-- info</span><br><span class="line">-- pack</span><br></pre></td></tr></table></figure>

<p>a.txt 文件内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p>查看三个 add 的类型和内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git cat-file -t 56a6</span><br><span class="line">blob</span><br><span class="line">$ git cat-file -p 56a6</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">git</span><br><span class="line">$ git cat-file -t 7a75</span><br><span class="line">blob</span><br><span class="line">$ git cat-file -p 7a75</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">$ git cat-file -t 5f5f</span><br><span class="line">blob</span><br><span class="line">$ git cat-file -p 5f5f</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p>通过 git show 5f5f 也可以查看内容<br><strong>显示的内容与加入 objects 的文件中的内容是一样的，所以其实这个散列值路径文件中保存的只是源文件内容的一种压缩形式</strong><br><strong>文件的内容是这样加入到objects 的,但是 名字、路径、格式 保存在哪里呢</strong></p>
<p>index 暂存区 保持文件的目录信息及指向 objects</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files -s</span><br><span class="line">100644 5f5fbe759f10b9807b18f3898afd7505dbbfcbd2 0       a.txt</span><br></pre></td></tr></table></figure>

<p><strong>100644:代表文件的类型为 blob, 最新的内容保存在: 5f5fbe759f10b9807b18f3898afd7505dbbfcbd2 这个文件里 ,文件名是 : a.txt</strong></p>
<p>数据对象(blob) 和 index 暂存区的关系</p>
<p><strong>数据对象(blob) 保持每次提交的内容,如果本次提交的内容之前提交过，就重复利用之前的内容，就不新建文件用于保持本次提交的内容</strong><br><strong>index 保持文件信息和文件指向的 数据对象(blob) 的 hash 文件名</strong></p>
<p>添加目录并增加文件内容为 1 2, add 到暂存区<br>目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">|-- a.txt</span><br><span class="line">`-- newDir</span><br><span class="line">`-- b.txt</span><br></pre></td></tr></table></figure>


<p>暂存区内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files -s</span><br><span class="line">100644 5f5fbe759f10b9807b18f3898afd7505dbbfcbd2 0       a.txt         <span class="comment"># 1 2 3   </span></span><br><span class="line">100644 7a754f414cd8ac6c069ac2e25baff0f55bff8b4a 0       newDir/b.txt  <span class="comment"># 1 2</span></span><br></pre></td></tr></table></figure>

<p>数据对象</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree .git/objects</span><br><span class="line">.git/objects</span><br><span class="line">|-- 56</span><br><span class="line">|   `-- a6051ca2b02b04ef92d5150c9ef600403cb1de  <span class="comment"># 1</span></span><br><span class="line">|-- 5f</span><br><span class="line">|   `-- 5fbe759f10b9807b18f3898afd7505dbbfcbd2  <span class="comment"># 1 2 3</span></span><br><span class="line">|-- 7a</span><br><span class="line">|   `-- 754f414cd8ac6c069ac2e25baff0f55bff8b4a  <span class="comment"># 1 2  </span></span><br><span class="line">--pack</span><br></pre></td></tr></table></figure>

<h3 id="树对象-tree-commit-提交对象"><a href="#树对象-tree-commit-提交对象" class="headerlink" title="树对象(tree) commit(提交对象)"></a>树对象(tree) commit(提交对象)</h3><p>代码文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> a.txt</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">$ <span class="built_in">cat</span> newDir/b.txt</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>暂存区内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-files -s</span><br><span class="line">100644 7a754f414cd8ac6c069ac2e25baff0f55bff8b4a 0       a.txt</span><br><span class="line">100644 56a6051ca2b02b04ef92d5150c9ef600403cb1de 0       newDir/b.txt</span><br></pre></td></tr></table></figure>

<p>commit 后出现的tree 和 commit 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ tree .git/objects</span><br><span class="line">.git/objects</span><br><span class="line">|-- 38</span><br><span class="line">|   `-- b746c1b3987269e9034729b0686483e5c6a5fb  <span class="comment">## commit  -&gt;e46a 指向目录及文件和文件内容</span></span><br><span class="line">|-- 56</span><br><span class="line">|   `-- a6051ca2b02b04ef92d5150c9ef600403cb1de  <span class="comment">## blob   1</span></span><br><span class="line">|-- 5b</span><br><span class="line">|   `-- dbe4af037c9493218efd2ba4ca00c12681b81e  <span class="comment">## tree  b.txt -&gt;56a6</span></span><br><span class="line">|-- 7a</span><br><span class="line">|   `-- 754f414cd8ac6c069ac2e25baff0f55bff8b4a  <span class="comment">## blob   1 2</span></span><br><span class="line">|-- e4</span><br><span class="line">|   `-- 6a7e036d2c27ec964cc6de44307e641f3fd564  <span class="comment">## tree  a.txt-&gt;7a75  newDir -&gt;5bdb</span></span><br><span class="line">|-- info</span><br><span class="line"> -- pack</span><br><span class="line">7 directories, 5 files</span><br></pre></td></tr></table></figure>

<p><strong>当前的仓库是这样的,就是给工作区的目录及文件和文件内容进行了一次快照</strong></p>
<pre class="mermaid">graph TD;
    38b7[38b7 commit] --> e46a[e46a tree];
    e46a   --> 7a75[7a75 blob  -> a.txt 1 2];
    e46a   --> 5bdb[5bdb tree  -> newDir b.txt];
    5bdb  -->  56a6[56a6 blob ->  b.txt 1 ];</pre>

<h3 id="Tag-对象"><a href="#Tag-对象" class="headerlink" title="Tag 对象"></a>Tag 对象</h3><p>通常在软件发布的时候会打一个tag，用于标注这次发布的相关信息, 这样做的好处是，将来如果这个版本出现了问题，可以通过tag迅速定位到当前版本，进行错误修复。<br>在执行git commit 后可以执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git  tag   -a v1.6  -m <span class="string">&#x27;第一个版本&#x27;</span></span><br></pre></td></tr></table></figure>

<p>v1.6 就是这个tag的名称，通常以版本号命名。注意：tag是打在最近的一次Commit记录上的，比如我最近一次提交记录的 commit id 是 38b7，那么执行完上面命令后，tag就打在了这个Commit ID上。 </p>
<p>object 内出现了一个新的文件,类型为tag ,内容指向最近一次 commit id</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ tree  .git/objects</span><br><span class="line">.git/objects</span><br><span class="line">|-- 2f</span><br><span class="line">|   `-- 4ee9f9ccdde83eaad7ed4a514bdfe7483c3ed7</span><br><span class="line"></span><br><span class="line">$ git cat-file -t 2f4e</span><br><span class="line">tag</span><br><span class="line"></span><br><span class="line">$ git cat-file -p 2f4e</span><br><span class="line">object 38b746c1b3987269e9034729b0686483e5c6a5fb</span><br><span class="line"><span class="built_in">type</span> commit</span><br><span class="line">tag v1.6</span><br><span class="line">tagger someone &lt;xxx@gmail.com&gt; 1651588134 +0800</span><br><span class="line"></span><br><span class="line">第一个版本</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">log</span></span><br><span class="line">commit 38b746c1b3987269e9034729b0686483e5c6a5fb (HEAD -&gt; master, tag: v1.6)</span><br><span class="line">Author: someone &lt;xxx@gmail.com&gt;</span><br><span class="line">Date:   Tue May 3 19:37:18 2022 +0800</span><br><span class="line"></span><br><span class="line">    oneCommit</span><br></pre></td></tr></table></figure>


<p>可以过滤 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git  tag              <span class="comment">#列出所有</span></span><br><span class="line">v1.6 </span><br><span class="line">$ git  tag  -l <span class="string">&#x27;v1.*&#x27;</span>   <span class="comment">#tag 太多可以进行过滤</span></span><br><span class="line">v1.6 </span><br></pre></td></tr></table></figure>

<p>用 tag 快速查看 提交的详细信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$ git show v1.6</span><br><span class="line">tag v1.6</span><br><span class="line">Tagger: someone &lt;xxx@gmail.com&gt;</span><br><span class="line">Date:   Tue May 3 22:28:54 2022 +0800</span><br><span class="line"></span><br><span class="line">第一个版本</span><br><span class="line"></span><br><span class="line">commit 38b746c1b3987269e9034729b0686483e5c6a5fb (HEAD -&gt; master, tag: v1.6)</span><br><span class="line">Author: someone &lt;xxx@gmail.com&gt;</span><br><span class="line">Date:   Tue May 3 19:37:18 2022 +0800</span><br><span class="line"></span><br><span class="line">    oneCommit</span><br><span class="line"></span><br><span class="line">diff --git a/a.txt b/a.txt</span><br><span class="line">new file mode 100644</span><br><span class="line">index 0000000..7a754f4</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/a.txt</span><br><span class="line">@@ -0,0 +1,2 @@</span><br><span class="line">+1</span><br><span class="line">+2</span><br><span class="line">\ No newline at end of file</span><br><span class="line">diff --git a/newDir/b.txt b/newDir/b.txt</span><br><span class="line">new file mode 100644</span><br><span class="line">index 0000000..56a6051</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/newDir/b.txt</span><br><span class="line">@@ -0,0 +1 @@</span><br><span class="line">+1</span><br><span class="line">\ No newline at end of file</span><br></pre></td></tr></table></figure>

<p>为历史提交添加 tag 信息或修改历史 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v2.0  -m <span class="string">&#x27;第二个版本&#x27;</span>   38b746c1b3987269e9034729b0686483e5c6a5fb</span><br></pre></td></tr></table></figure>

<p><strong>用图示来描述 git 仓库变化</strong>   </p>
<p>当前文件目录及文件内容(# 后面是内容)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">|-- a.txt  <span class="comment">#1 2</span></span><br><span class="line">`-- newDir</span><br><span class="line">    `-- b.txt <span class="comment">#1</span></span><br></pre></td></tr></table></figure>

<p>当前仓库快照</p>
<pre class="mermaid">  graph TB;
    a.txt ---暂存区指向仓库7a75----> 7a75;
    newDir/b.txt ---暂存区指向仓库56a6----> 56a6;
    subgraph 工作目录
      a[a.txt -> 1 2 ]; 
      b[newDir -> b.txt -> 1 ];
    end
    subgraph 暂存区
      a.txt ;
      newDir/b.txt ;
    end
    
    subgraph git_仓库
      Head --> master;
      master --> 38b7[38b7 commit tag v2.0];
      38b7 --> e46a[e46a tree];
      e46a   --> 7a75[7a75 blob  -> a.txt 1 2];
      e46a   --> 5bdb[5bdb tree  -> newDir b.txt];
      5bdb  -->  56a6[56a6 blob ->  b.txt 1];
    end</pre>

<p>修改并 add , commit 当前文件目录及文件内容(#后面是内容)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">.</span><br><span class="line">|-- a.txt  <span class="comment">#1 2 3</span></span><br><span class="line">`-- newDir</span><br><span class="line">    `-- b.txt <span class="comment">#1</span></span><br></pre></td></tr></table></figure>

<p>当前仓库快照</p>
<pre class="mermaid"> graph TB;
   a.txt ---暂存区指向仓库5f5f----> 5f5f;
   newDir/b.txt ---暂存区指向仓库56a6----> 56a6;
   subgraph 工作目录
     a[a.txt -> 1 2 3 ]; 
     b[newDir -> b.txt -> 1 ];
    end
    subgraph 暂存区
      a.txt ;
      newDir/b.txt ;
    end
    
    subgraph git_仓库
      Head --> master;
      master --> 9f4a[9f4a commit tag v3.0];
      1eca(1eca tag v3.0) --> 9f4a;
      9f4a --> 02a4[02a4 tree ]
      02a4 --> 5f5f[5f5f blob -> a.txt 1 2 3]
      02a4 --> 5bdb
      1b8b(1b8b tag v2.0) --> 38b7[38b7 commit tag v2.0];
      9f4a  -.指向父 commit .->38b7
      38b7  --> e46a[e46a tree];
      e46a  --> 7a75[7a75 blob  -> a.txt 1 2];
      e46a  --> 5bdb[5bdb tree  -> newDir b.txt];
      5bdb  -->  56a6[56a6 blob ->  b.txt 1];
    end</pre>

<blockquote>
<p>通过对比两次仓库的变化,Git储存的是全新的文件快照，而不是文件的变更记录。也就是说，就算你只是在文件中添加一行，Git也会新建一个全新的blob object。那这样子是不是很浪费空间呢?这其实是Git在空间和时间上的一个取舍，思考一下你要checkout一个commit，或对比两个commit之间的差异。如果Git储存的是文件的变更部分，那么为了拿到一个commit的内容，Git都只能从第一个commit开始，然后一直计算变更，直到目标commit，这会花费很长时间。而相反，Git采用的储存全新文件快照的方法能使这个操作变得很快，直接从快照里面拿取内容就行了。当然，在涉及网络传输或者Git仓库真的体积很大的时候，Git会有垃圾回收机制gc，不仅会清除无用的object，还会把已有的相似object打包压缩。</p>
</blockquote>
<blockquote>
<p>Git怎么保证历史记录不可篡改 通过SHA1哈希算法和哈系树来保证。假设你偷偷修改了历史变更记录上一个文件的内容，那么这个问卷的blob object的SHA1哈希值就变了，与之相关的tree object的SHA1也需要改变，commit的SHA1也要变，这个commit之后的所有commit SHA1值也要跟着改变。又由于Git是分布式系统，即所有人都有一份完整历史的Git仓库，所以所有人都能很轻松的发现存在问题。</p>
</blockquote>
<blockquote>
<p>为什么要把文件的权限和文件名储存在tree object里面而不是blob object呢,想象一下修改一个文件的命名。如果将文件名保存在blob里面，那么Git只能多复制一份原始内容形成一个新的blob object。而Git的实现方法只需要创建一个新的tree object将对应的文件名更改成新的即可，原本的blob object可以复用，节约了空间。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/96631135">参考链接</a></p>
<h1 id="git-提交规范"><a href="#git-提交规范" class="headerlink" title="git 提交规范"></a>git 提交规范</h1><p><em>Commit Message 格式</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">type</span>&gt;</span>(<span class="tag">&lt;<span class="name">scope</span>&gt;</span>): <span class="tag">&lt;<span class="name">subject</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>可以看出分为三个部分，头部、主体、底部,其中主体和底部是可选的</em><br>body：主要对本次 commit 的详细描述，可以分成多行<br>footer：一些备注,主要放置不兼容变更和 Issue 关闭的信息,为了方便代码的快速提交，body 和 footer 部分可以省略。</p>
<blockquote>
<p>不兼容变更指的是更改了当前功能，即接口逻辑跟之前版本发生很大变化，必须要前后端同时发布，否则会有一段时间服务不可用。 一般的做法是引入接口版本号，新老版本接口并存</p>
</blockquote>
<h2 id="头部"><a href="#头部" class="headerlink" title="头部"></a>头部</h2><p><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</code></p>
<p>type 类型，修改的类型级别，是必选:</p>
<ul>
<li>feat：新功能（feature）</li>
<li>fix：修补 bug</li>
<li>docs：文档（documentation）</li>
<li>style： 格式（不影响代码运行的变动），比如增加逗号，缩进，空格等</li>
<li>refactor：重构（即不是新增功能，也不是修改 bug 的代码变动）</li>
<li>perf: 优化相关,比如性能提升，用户体验等</li>
<li>test：增加测试</li>
<li>chore：构建过程或辅助工具的变动，比如改变构建流程，或增加或更改依赖库或工具</li>
<li>revert：版本回滚</li>
</ul>
<p>scope 修改范围：</p>
<ul>
<li>主要是这次修改涉及到的部分，最好简单的概括， 影响范围（组件或文件),是可选的，比如应用层等<br>subject 修改的副标题：</li>
<li>主要是具体修改的功能点,第一人称现在时，动词开头，小写开头，英语 50 字符以内，结尾无句号，是必选</li>
</ul>
<p>实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;feat(增加订单): 建立订单服务，持久化订单到数据库&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果是用JIRA 管理开发,可以直接填写 JIRA 编号,例如 CODE-100</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;feat(增加订单)：CODE-100 &quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="规范提交的方式"><a href="#规范提交的方式" class="headerlink" title="规范提交的方式"></a>规范提交的方式</h2><p>在当前用户的git 配置文件增加如下配置在提交的时候 输入 git  commit 会自动出一个模板进行输入提交<br>[commit]<br>    template = C:/Users/user/gitCommitTemplate.txt</p>
<h1 id="代码评审"><a href="#代码评审" class="headerlink" title="代码评审"></a>代码评审</h1><p>代码评审发生在 Feature 分支向 Develop 分支合并前：<br><img src="/2022/05/29/git/git/merge_request.png" alt="合并代码"></p>
<p>代码评审流程,在GitHub里就是提交一个 pr<br><img src="/2022/05/29/git/git/merge_request_flow.png" alt="代码评审流程"></p>
<p>不同的颜色块，代表不同的角色<br>创建一个 Merge Request,，在没有合并前， 可以进行多次 Push ,以应对代码评审。<br>开发人员推动整个代码评审流程的执行，包含及时通知组员评审代码、通知组长合并代码等</p>
<p>为了非法的提交代码设置保护分支，有代码只能通过创建 Merge Request 的方式合并到 develop 和 master 分支；为了代码库的安全，需要回收 Maintainers 权限，除组长外的开发人员都是 Developer 权限。</p>
<p>其他注意事项</p>
<ol>
<li>提交合并请求时，先同步最新代码<br>提交合并代码前，建议先执行 git fetch 和 git merge/rebase 将 develop 分支下的最新代码更新到开发分支，再提交合并请求，避免造成冲突。</li>
<li>合并代码到 master 分支，通过 develop 分支提测且测试通过后，将 develop 分支的代码合并到 master 分支进行发版，版本发布完成时及时打标签</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Hank Bai
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://bh.com/2022/05/29/git/git/" title="git 常用命令">http://bh.com/2022/05/29/git/git/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/05/29/linux/linux/" rel="prev" title="linux 基础知识">
                  <i class="fa fa-chevron-left"></i> linux 基础知识
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/06/05/three/three_basic/" rel="next" title="three.js 基础">
                  three.js 基础 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hank Bai</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">98k</span>
  </span>
</div>


  <script src='https://unpkg.com/mermaid@9.2.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>


    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"version":"9.2.2","theme":{"light":"default","dark":"dark","options":{"maxTextSize":99999}},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.2.2/mermaid.min.js","integrity":"sha256-CemUs9ITT7liCZpVMktcEw0BpAOZ1+mujlMB3UyuImU="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"BAI-HANK","repo":"bai-hank.github.io","client_id":"ee40f9d8aaf703fdb6ed","client_secret":"64cd53b08de038c5276753612c35ace517544597","admin_user":"BAI-HANK","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"96d50f2d40d39f9b407e2292620b0344"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7}});</script></body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/custom/clickLove.js"></script>

